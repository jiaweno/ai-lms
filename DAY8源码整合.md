# DAY8 å®Œæ•´å¼€å‘æ—¥å¿—ä¸æºç  - éƒ¨ç½²ä¸Šçº¿ä¸ç»´æŠ¤

## ğŸ“… DAY8 å¼€å‘æ—¥å¿— - 2025-05-30

### é¡¹ç›®æ¦‚è¿°
**å½“å‰è¿›åº¦**: 8/8é˜¶æ®µ (100%)  
**å¼€å‘é‡ç‚¹**: ç¬¬å…«é˜¶æ®µ - éƒ¨ç½²ä¸Šçº¿ä¸ç»´æŠ¤å®Œæ•´å®ç°  
**æŠ€æœ¯æ ˆ**: Vercel + Railway + Docker + HTTPS + ç›‘æ§ + è‡ªåŠ¨åŒ–è¿ç»´

---

## ğŸš€ å¼€å‘è¿›å±•æ€»ç»“

### ä¸Šåˆä»»åŠ¡å®Œæˆæƒ…å†µ (09:00-12:00) âœ…
- **ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²**: Vercelå‰ç«¯éƒ¨ç½²é…ç½®å®Œæˆ
- **åç«¯æœåŠ¡éƒ¨ç½²**: Railwayäº‘å¹³å°é…ç½®
- **æ•°æ®åº“è¿ç§»**: ç”Ÿäº§æ•°æ®åº“ç»“æ„éƒ¨ç½²
- **CDNé…ç½®**: CloudflareåŠ é€Ÿé…ç½®

### ä¸‹åˆä»»åŠ¡å®Œæˆæƒ…å†µ (14:00-18:00) âœ…  
- **å®‰å…¨åŠ å›º**: HTTPSè¯ä¹¦é…ç½®å’ŒAPIå®‰å…¨é˜²æŠ¤
- **ç›‘æ§ç³»ç»Ÿ**: æ—¥å¿—æ”¶é›†å’Œæ€§èƒ½ç›‘æ§éƒ¨ç½²
- **è‡ªåŠ¨åŒ–è¿ç»´**: å¤‡ä»½ç­–ç•¥å’Œæ•…éšœæ¢å¤æœºåˆ¶
- **CI/CDæµæ°´çº¿**: è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹å®Œå–„

### æ™šä¸Šä»»åŠ¡å®Œæˆæƒ…å†µ (19:00-21:00) âœ…
- **æ–‡æ¡£å®Œå–„**: éƒ¨ç½²æ–‡æ¡£å’Œç”¨æˆ·æ‰‹å†Œç¼–å†™
- **æœ€ç»ˆæµ‹è¯•**: ç”Ÿäº§ç¯å¢ƒå…¨åŠŸèƒ½éªŒè¯
- **é¡¹ç›®æ€»ç»“**: å¼€å‘å†ç¨‹å›é¡¾å’ŒæŠ€æœ¯æ€»ç»“

---

## ğŸ’» æ ¸å¿ƒæŠ€æœ¯å®ç°

### 1. ç”Ÿäº§ç¯å¢ƒæ¶æ„
- **å‰ç«¯éƒ¨ç½²**: Vercelæ— æœåŠ¡å™¨éƒ¨ç½²
- **åç«¯éƒ¨ç½²**: Railwayå®¹å™¨åŒ–éƒ¨ç½²
- **æ•°æ®åº“**: PostgreSQLäº‘æ•°æ®åº“
- **æ–‡ä»¶å­˜å‚¨**: AWS S3ç”Ÿäº§çº§å­˜å‚¨

### 2. å®‰å…¨é˜²æŠ¤ä½“ç³»
- **HTTPSå…¨ç«™åŠ å¯†**: SSL/TLSè¯ä¹¦é…ç½®
- **APIå®‰å…¨**: é™æµã€é˜²ç«å¢™ã€åŠ å¯†ä¼ è¾“
- **æ•°æ®å®‰å…¨**: æ•°æ®åº“å¤‡ä»½ã€è®¿é—®æ§åˆ¶
- **è¿è¡Œå®‰å…¨**: å®¹å™¨å®‰å…¨ã€ç¯å¢ƒéš”ç¦»

### 3. ç›‘æ§è¿ç»´ç³»ç»Ÿ
- **å®æ—¶ç›‘æ§**: æ€§èƒ½æŒ‡æ ‡ã€é”™è¯¯è¿½è¸ª
- **æ—¥å¿—ç®¡ç†**: é›†ä¸­åŒ–æ—¥å¿—æ”¶é›†åˆ†æ
- **è‡ªåŠ¨å¤‡ä»½**: æ•°æ®åº“å’Œæ–‡ä»¶è‡ªåŠ¨å¤‡ä»½
- **æ•…éšœæ¢å¤**: è‡ªåŠ¨æ•…éšœæ£€æµ‹å’Œæ¢å¤

### 4. CI/CDè‡ªåŠ¨åŒ–
- **ä»£ç æ£€æŸ¥**: è‡ªåŠ¨åŒ–ä»£ç è´¨é‡æ£€æµ‹
- **æµ‹è¯•æµç¨‹**: å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- **éƒ¨ç½²æµæ°´çº¿**: è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œå›æ»š
- **ç‰ˆæœ¬ç®¡ç†**: è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶

---

## ğŸ“‹ å®Œæ•´æºç å®ç°

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é…ç½®

#### ã€.github/workflows/deploy.ymlã€‘- CI/CDæµæ°´çº¿
```yaml
name: Deploy AI Learning Management System

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  # ä»£ç è´¨é‡æ£€æŸ¥
  quality-check:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies (Frontend)
        working-directory: ./frontend
        run: npm ci

      - name: Install dependencies (Backend)
        working-directory: ./backend
        run: npm ci

      - name: Lint Frontend
        working-directory: ./frontend
        run: npm run lint

      - name: Lint Backend
        working-directory: ./backend
        run: npm run lint

      - name: Type Check Frontend
        working-directory: ./frontend
        run: npm run type-check

      - name: Type Check Backend
        working-directory: ./backend
        run: npm run type-check

  # è¿è¡Œæµ‹è¯•
  test:
    runs-on: ubuntu-latest
    needs: quality-check
    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: postgres
          POSTGRES_DB: ai_lms_test
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - 5432:5432

      redis:
        image: redis:7
        options: >-
          --health-cmd "redis-cli ping"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - 6379:6379

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        run: |
          cd frontend && npm ci
          cd ../backend && npm ci

      - name: Run Backend Tests
        working-directory: ./backend
        env:
          NODE_ENV: test
          DATABASE_URL: postgresql://postgres:postgres@localhost:5432/ai_lms_test
          REDIS_URL: redis://localhost:6379
          JWT_SECRET: test-secret
        run: |
          npm run db:migrate
          npm run test

      - name: Run Frontend Tests
        working-directory: ./frontend
        run: npm run test

      - name: Run E2E Tests
        working-directory: ./frontend
        run: npm run test:e2e

  # æ„å»ºå‰ç«¯
  build-frontend:
    runs-on: ubuntu-latest
    needs: test
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        working-directory: ./frontend
        run: npm ci

      - name: Build Frontend
        working-directory: ./frontend
        env:
          VITE_API_URL: ${{ secrets.VITE_API_URL }}
          VITE_WS_URL: ${{ secrets.VITE_WS_URL }}
        run: npm run build

      - name: Upload build artifacts
        uses: actions/upload-artifact@v4
        with:
          name: frontend-build
          path: frontend/dist

  # æ„å»ºå¹¶æ¨é€åç«¯Dockeré•œåƒ
  build-backend:
    runs-on: ubuntu-latest
    needs: test
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v3

      - name: Login to Container Registry
        uses: docker/login-action@v3
        with:
          registry: ghcr.io
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}

      - name: Extract metadata
        id: meta
        uses: docker/metadata-action@v5
        with:
          images: ghcr.io/${{ github.repository }}/backend
          tags: |
            type=ref,event=branch
            type=ref,event=pr
            type=sha,prefix={{branch}}-
            type=raw,value=latest,enable={{is_default_branch}}

      - name: Build and push
        uses: docker/build-push-action@v5
        with:
          context: ./backend
          push: true
          tags: ${{ steps.meta.outputs.tags }}
          labels: ${{ steps.meta.outputs.labels }}
          cache-from: type=gha
          cache-to: type=gha,mode=max

  # éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
  deploy-production:
    runs-on: ubuntu-latest
    needs: [build-frontend, build-backend]
    if: github.ref == 'refs/heads/main'
    environment: production
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Deploy to Vercel (Frontend)
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          working-directory: ./frontend
          vercel-args: '--prod'

      - name: Deploy to Railway (Backend)
        uses: railway-deploy@v1
        with:
          token: ${{ secrets.RAILWAY_TOKEN }}
          service: ai-lms-backend

      - name: Run Database Migrations
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
        run: |
          cd backend
          npm ci
          npx prisma migrate deploy

      - name: Notify deployment success
        uses: 8398a7/action-slack@v3
        with:
          status: success
          channel: '#deployments'
          webhook_url: ${{ secrets.SLACK_WEBHOOK }}
        if: success()

      - name: Notify deployment failure
        uses: 8398a7/action-slack@v3
        with:
          status: failure
          channel: '#deployments'
          webhook_url: ${{ secrets.SLACK_WEBHOOK }}
        if: failure()

  # éƒ¨ç½²åçƒŸé›¾æµ‹è¯•
  smoke-test:
    runs-on: ubuntu-latest
    needs: deploy-production
    steps:
      - name: Health Check API
        run: |
          sleep 30  # ç­‰å¾…éƒ¨ç½²å®Œæˆ
          curl -f ${{ secrets.API_URL }}/api/health || exit 1

      - name: Test Frontend Loading
        run: |
          curl -f ${{ secrets.FRONTEND_URL }} || exit 1

      - name: Test Database Connection
        run: |
          curl -f ${{ secrets.API_URL }}/api/health/db || exit 1

      - name: Test Redis Connection
        run: |
          curl -f ${{ secrets.API_URL }}/api/health/redis || exit 1
```

#### ã€backend/Dockerfile.productionã€‘- ç”Ÿäº§ç¯å¢ƒDockerfile
```dockerfile
# å¤šé˜¶æ®µæ„å»ºï¼Œä¼˜åŒ–é•œåƒå¤§å°
FROM node:18-alpine AS builder

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å¤åˆ¶packageæ–‡ä»¶
COPY package*.json ./
COPY prisma ./prisma/

# å®‰è£…ä¾èµ–ï¼ˆåŒ…æ‹¬å¼€å‘ä¾èµ–ï¼Œç”¨äºæ„å»ºï¼‰
RUN npm ci

# å¤åˆ¶æºä»£ç 
COPY . .

# ç”ŸæˆPrismaå®¢æˆ·ç«¯
RUN npx prisma generate

# æ„å»ºåº”ç”¨
RUN npm run build

# ç§»é™¤å¼€å‘ä¾èµ–
RUN npm ci --only=production && npm cache clean --force

# ç”Ÿäº§é•œåƒ
FROM node:18-alpine AS production

# åˆ›å»ºérootç”¨æˆ·
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nextjs -u 1001

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apk add --no-cache \
    curl \
    dumb-init \
    fontconfig \
    && rm -rf /var/cache/apk/*

# å¤åˆ¶æ„å»ºäº§ç‰©
COPY --from=builder --chown=nextjs:nodejs /app/dist ./dist
COPY --from=builder --chown=nextjs:nodejs /app/node_modules ./node_modules
COPY --from=builder --chown=nextjs:nodejs /app/package*.json ./
COPY --from=builder --chown=nextjs:nodejs /app/prisma ./prisma

# å¤åˆ¶å¯åŠ¨è„šæœ¬
COPY --chown=nextjs:nodejs scripts/docker-entrypoint.sh ./
RUN chmod +x docker-entrypoint.sh

# åˆ‡æ¢åˆ°érootç”¨æˆ·
USER nextjs

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:3000/api/health || exit 1

# æš´éœ²ç«¯å£
EXPOSE 3000

# ä½¿ç”¨dumb-initä½œä¸ºPID 1
ENTRYPOINT ["dumb-init", "--"]

# å¯åŠ¨åº”ç”¨
CMD ["./docker-entrypoint.sh"]
```

#### ã€backend/scripts/docker-entrypoint.shã€‘- å®¹å™¨å¯åŠ¨è„šæœ¬
```bash
#!/bin/sh
set -e

echo "ğŸš€ Starting AI Learning Management System Backend..."

# ç­‰å¾…æ•°æ®åº“è¿æ¥
echo "â³ Waiting for database to be ready..."
while ! npx prisma db push --skip-generate > /dev/null 2>&1; do
  echo "ğŸ’¤ Database not ready, waiting 5 seconds..."
  sleep 5
done

echo "âœ… Database is ready!"

# è¿è¡Œæ•°æ®åº“è¿ç§»
echo "ğŸ”„ Running database migrations..."
npx prisma migrate deploy

# æ£€æŸ¥æ˜¯å¦éœ€è¦åˆå§‹åŒ–æ•°æ®
if [ "$INIT_DATA" = "true" ]; then
  echo "ğŸ“Š Initializing sample data..."
  npm run db:seed
fi

# å¯åŠ¨åº”ç”¨
echo "ğŸ¯ Starting application..."
exec node dist/app.js
```

#### ã€vercel.jsonã€‘- Verceléƒ¨ç½²é…ç½®
```json
{
  "version": 2,
  "name": "ai-lms-frontend",
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "dist"
      }
    }
  ],
  "routes": [
    {
      "src": "/assets/(.*)",
      "headers": {
        "cache-control": "public, max-age=31536000, immutable"
      }
    },
    {
      "src": "/(.*\\.(js|css|ico|png|jpg|jpeg|gif|svg|woff|woff2))",
      "headers": {
        "cache-control": "public, max-age=31536000, immutable"
      }
    },
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ],
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        },
        {
          "key": "X-Frame-Options",
          "value": "DENY"
        },
        {
          "key": "X-XSS-Protection",
          "value": "1; mode=block"
        },
        {
          "key": "Referrer-Policy",
          "value": "strict-origin-when-cross-origin"
        },
        {
          "key": "Strict-Transport-Security",
          "value": "max-age=31536000; includeSubDomains"
        }
      ]
    }
  ],
  "env": {
    "VITE_API_URL": "@vite_api_url",
    "VITE_WS_URL": "@vite_ws_url",
    "VITE_SENTRY_DSN": "@vite_sentry_dsn"
  },
  "build": {
    "env": {
      "VITE_API_URL": "@vite_api_url",
      "VITE_WS_URL": "@vite_ws_url"
    }
  }
}
```

#### ã€railway.tomlã€‘- Railwayéƒ¨ç½²é…ç½®
```toml
[build]
builder = "dockerfile"
dockerfilePath = "Dockerfile.production"

[deploy]
healthcheckPath = "/api/health"
healthcheckTimeout = 30
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[env]
NODE_ENV = "production"
PORT = { default = "3000" }

# æ•°æ®åº“é…ç½®
DATABASE_URL = { default = "${{Postgres.DATABASE_URL}}" }
REDIS_URL = { default = "${{Redis.REDIS_URL}}" }

# åº”ç”¨é…ç½®
JWT_SECRET = { default = "${{JWT_SECRET}}" }
OPENAI_API_KEY = { default = "${{OPENAI_API_KEY}}" }

# æ–‡ä»¶å­˜å‚¨é…ç½®
AWS_ACCESS_KEY_ID = { default = "${{AWS_ACCESS_KEY_ID}}" }
AWS_SECRET_ACCESS_KEY = { default = "${{AWS_SECRET_ACCESS_KEY}}" }
AWS_REGION = { default = "us-east-1" }
S3_BUCKET_NAME = { default = "ai-lms-production" }

# é‚®ä»¶é…ç½®
SMTP_HOST = { default = "${{SMTP_HOST}}" }
SMTP_USER = { default = "${{SMTP_USER}}" }
SMTP_PASS = { default = "${{SMTP_PASS}}" }

# ç›‘æ§é…ç½®
SENTRY_DSN = { default = "${{SENTRY_DSN}}" }

[scaling]
minReplicas = 1
maxReplicas = 10

[networking]
serviceName = "ai-lms-backend"
```

### å®‰å…¨é…ç½®ä¸é˜²æŠ¤

#### ã€backend/src/middleware/security.tsã€‘- å®‰å…¨ä¸­é—´ä»¶
```typescript
import { FastifyInstance, FastifyRequest, FastifyReply } from 'fastify'
import { createHash, createHmac } from 'crypto'
import { RateLimiterRedis } from 'rate-limiter-flexible'
import { redis } from '@/config/redis'
import { logger } from '@/utils/logger'
import { env } from '@/config/env'

// IPç™½åå•
const IP_WHITELIST = [
  '127.0.0.1',
  '::1',
  // æ·»åŠ å¯ä¿¡çš„æœåŠ¡å™¨IP
]

// æ•æ„Ÿè·¯å¾„ä¿æŠ¤
const SENSITIVE_PATHS = [
  '/api/admin',
  '/api/monitoring',
  '/api/reports',
]

// åˆ›å»ºé™æµå™¨
const rateLimiters = {
  // é€šç”¨APIé™æµ
  general: new RateLimiterRedis({
    storeClient: redis,
    keyPrefix: 'rl:general',
    points: 100, // è¯·æ±‚æ•°
    duration: 60, // æ—¶é—´çª—å£ï¼ˆç§’ï¼‰
    blockDuration: 60, // å°ç¦æ—¶é—´ï¼ˆç§’ï¼‰
  }),

  // ç™»å½•é™æµ
  auth: new RateLimiterRedis({
    storeClient: redis,
    keyPrefix: 'rl:auth',
    points: 5, // 5æ¬¡å°è¯•
    duration: 300, // 5åˆ†é’Ÿçª—å£
    blockDuration: 900, // å°ç¦15åˆ†é’Ÿ
  }),

  // ä¸¥æ ¼é™æµï¼ˆæ•æ„Ÿæ“ä½œï¼‰
  strict: new RateLimiterRedis({
    storeClient: redis,
    keyPrefix: 'rl:strict',
    points: 10, // 10æ¬¡è¯·æ±‚
    duration: 60, // 1åˆ†é’Ÿçª—å£
    blockDuration: 300, // å°ç¦5åˆ†é’Ÿ
  }),
}

// å®‰å…¨ä¸­é—´ä»¶
export const securityMiddleware = async (app: FastifyInstance) => {
  // IPç™½åå•æ£€æŸ¥
  app.addHook('onRequest', async (request: FastifyRequest, reply: FastifyReply) => {
    const clientIP = getClientIP(request)
    
    // æ£€æŸ¥æ˜¯å¦åœ¨ç™½åå•ä¸­ï¼ˆä»…å¯¹æ•æ„Ÿè·¯å¾„ï¼‰
    if (SENSITIVE_PATHS.some(path => request.url.startsWith(path))) {
      if (!IP_WHITELIST.includes(clientIP) && env.NODE_ENV === 'production') {
        logger.warn(`Blocked access from non-whitelisted IP: ${clientIP} to ${request.url}`)
        reply.code(403).send({
          success: false,
          error: 'Forbidden',
          message: 'Access denied',
        })
        return
      }
    }
  })

  // è¯·æ±‚ç­¾åéªŒè¯ï¼ˆWebHookç­‰ï¼‰
  app.addHook('preHandler', async (request: FastifyRequest, reply: FastifyReply) => {
    if (request.url.startsWith('/api/webhooks/')) {
      const signature = request.headers['x-signature'] as string
      if (!signature) {
        reply.code(401).send({ error: 'Missing signature' })
        return
      }

      const body = JSON.stringify(request.body)
      const expectedSignature = createHmac('sha256', env.WEBHOOK_SECRET)
        .update(body)
        .digest('hex')

      if (signature !== `sha256=${expectedSignature}`) {
        reply.code(401).send({ error: 'Invalid signature' })
        return
      }
    }
  })

  // åŠ¨æ€é™æµ
  app.addHook('preHandler', async (request: FastifyRequest, reply: FastifyReply) => {
    const clientIP = getClientIP(request)
    const key = `${clientIP}:${request.url}`

    try {
      // é€‰æ‹©é™æµå™¨
      let limiter = rateLimiters.general
      
      if (request.url.startsWith('/api/auth/')) {
        limiter = rateLimiters.auth
      } else if (SENSITIVE_PATHS.some(path => request.url.startsWith(path))) {
        limiter = rateLimiters.strict
      }

      await limiter.consume(key)
    } catch (rejRes: any) {
      const secs = Math.round(rejRes.msBeforeNext / 1000) || 1
      
      reply.code(429).headers({
        'Retry-After': String(secs),
        'X-RateLimit-Limit': String(rejRes.totalHits),
        'X-RateLimit-Remaining': String(rejRes.remainingPoints || 0),
        'X-RateLimit-Reset': String(new Date(Date.now() + rejRes.msBeforeNext)),
      })

      reply.send({
        success: false,
        error: 'Too Many Requests',
        message: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åé‡è¯•',
        retryAfter: secs,
      })

      // è®°å½•é¢‘ç¹è¯·æ±‚
      logger.warn(`Rate limit exceeded for IP: ${clientIP}, URL: ${request.url}`)
      return
    }
  })

  // SQLæ³¨å…¥é˜²æŠ¤
  app.addHook('preHandler', async (request: FastifyRequest, reply: FastifyReply) => {
    const suspiciousPatterns = [
      /(\bUNION\b|\bSELECT\b|\bINSERT\b|\bUPDATE\b|\bDELETE\b|\bDROP\b)/i,
      /(\bOR\b|\bAND\b).*?=.*?=\b/i,
      /[\'"]\s*;\s*\w+/i,
      /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
    ]

    const checkValue = (value: any): boolean => {
      if (typeof value === 'string') {
        return suspiciousPatterns.some(pattern => pattern.test(value))
      }
      if (typeof value === 'object' && value !== null) {
        return Object.values(value).some(checkValue)
      }
      return false
    }

    // æ£€æŸ¥æŸ¥è¯¢å‚æ•°
    if (checkValue(request.query)) {
      logger.warn(`Suspicious query detected from IP: ${getClientIP(request)}`, {
        query: request.query,
        url: request.url,
      })
      reply.code(400).send({
        success: false,
        error: 'Bad Request',
        message: 'è¯·æ±‚å‚æ•°åŒ…å«éæ³•å­—ç¬¦',
      })
      return
    }

    // æ£€æŸ¥è¯·æ±‚ä½“
    if (request.body && checkValue(request.body)) {
      logger.warn(`Suspicious body detected from IP: ${getClientIP(request)}`, {
        body: request.body,
        url: request.url,
      })
      reply.code(400).send({
        success: false,
        error: 'Bad Request',
        message: 'è¯·æ±‚å†…å®¹åŒ…å«éæ³•å­—ç¬¦',
      })
      return
    }
  })

  // è¯·æ±‚å¤§å°é™åˆ¶
  app.addHook('preValidation', async (request: FastifyRequest, reply: FastifyReply) => {
    const contentLength = parseInt(request.headers['content-length'] || '0')
    const maxSize = request.url.includes('/upload') ? 50 * 1024 * 1024 : 1024 * 1024 // ä¸Šä¼ 50MBï¼Œå…¶ä»–1MB

    if (contentLength > maxSize) {
      reply.code(413).send({
        success: false,
        error: 'Payload Too Large',
        message: 'è¯·æ±‚å†…å®¹è¿‡å¤§',
      })
      return
    }
  })

  // æ·»åŠ å®‰å…¨å¤´
  app.addHook('onSend', async (request: FastifyRequest, reply: FastifyReply) => {
    reply.headers({
      'X-Content-Type-Options': 'nosniff',
      'X-Frame-Options': 'DENY',
      'X-XSS-Protection': '1; mode=block',
      'Referrer-Policy': 'strict-origin-when-cross-origin',
      'Content-Security-Policy': "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'",
    })

    if (env.NODE_ENV === 'production') {
      reply.header('Strict-Transport-Security', 'max-age=31536000; includeSubDomains')
    }
  })
}

// è·å–çœŸå®å®¢æˆ·ç«¯IP
function getClientIP(request: FastifyRequest): string {
  const xForwardedFor = request.headers['x-forwarded-for']
  const xRealIP = request.headers['x-real-ip']
  const cfConnectingIP = request.headers['cf-connecting-ip']

  if (cfConnectingIP && typeof cfConnectingIP === 'string') {
    return cfConnectingIP
  }

  if (xRealIP && typeof xRealIP === 'string') {
    return xRealIP
  }

  if (xForwardedFor && typeof xForwardedFor === 'string') {
    return xForwardedFor.split(',')[0].trim()
  }

  return request.ip
}

// è¯·æ±‚æŒ‡çº¹è¯†åˆ«
export function generateRequestFingerprint(request: FastifyRequest): string {
  const userAgent = request.headers['user-agent'] || ''
  const acceptLanguage = request.headers['accept-language'] || ''
  const acceptEncoding = request.headers['accept-encoding'] || ''
  const clientIP = getClientIP(request)

  const fingerprint = createHash('sha256')
    .update(`${clientIP}:${userAgent}:${acceptLanguage}:${acceptEncoding}`)
    .digest('hex')

  return fingerprint.substring(0, 16)
}

// å¼‚å¸¸è¡Œä¸ºæ£€æµ‹
export async function detectAnomalousActivity(request: FastifyRequest): Promise<boolean> {
  const fingerprint = generateRequestFingerprint(request)
  const key = `anomaly:${fingerprint}`
  
  // è·å–å†å²æ´»åŠ¨
  const activity = await redis.get(key)
  let activityData = activity ? JSON.parse(activity) : {
    firstSeen: Date.now(),
    requestCount: 0,
    lastRequest: 0,
    suspiciousScore: 0,
  }

  activityData.requestCount++
  activityData.lastRequest = Date.now()

  // æ£€æµ‹å¼‚å¸¸æ¨¡å¼
  const timeDiff = activityData.lastRequest - activityData.firstSeen
  const requestRate = activityData.requestCount / (timeDiff / 1000 / 60) // æ¯åˆ†é’Ÿè¯·æ±‚æ•°

  // å¼‚å¸¸è¯„åˆ†
  if (requestRate > 100) activityData.suspiciousScore += 10 // é«˜é¢‘è¯·æ±‚
  if (request.url.includes('admin') && requestRate > 5) activityData.suspiciousScore += 20 // æ•æ„Ÿè·¯å¾„é«˜é¢‘
  if (request.headers['user-agent']?.includes('bot')) activityData.suspiciousScore += 5 // æœºå™¨äºº

  // ä¿å­˜æ´»åŠ¨æ•°æ®
  await redis.setex(key, 3600, JSON.stringify(activityData)) // 1å°æ—¶è¿‡æœŸ

  return activityData.suspiciousScore > 50
}
```

### ç›‘æ§ä¸è¿ç»´ç³»ç»Ÿ

#### ã€backend/scripts/backup.shã€‘- æ•°æ®åº“å¤‡ä»½è„šæœ¬
```bash
#!/bin/bash

# AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿæ•°æ®åº“å¤‡ä»½è„šæœ¬
# ä½œè€…: AIå¼€å‘å›¢é˜Ÿ
# æ—¥æœŸ: 2025-05-30

set -e

# é…ç½®
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(dirname "$SCRIPT_DIR")"
BACKUP_DIR="/var/backups/ai-lms"
LOG_FILE="/var/log/ai-lms-backup.log"
RETENTION_DAYS=30

# ä»ç¯å¢ƒå˜é‡è·å–æ•°æ®åº“ä¿¡æ¯
DB_HOST="${DB_HOST:-localhost}"
DB_PORT="${DB_PORT:-5432}"
DB_NAME="${DB_NAME:-ai_lms}"
DB_USER="${DB_USER:-postgres}"
DB_PASSWORD="${DB_PASSWORD:-}"

# S3é…ç½®ï¼ˆå¯é€‰ï¼‰
S3_BUCKET="${S3_BUCKET:-}"
AWS_REGION="${AWS_REGION:-us-east-1}"

# æ—¥å¿—å‡½æ•°
log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" | tee -a "$LOG_FILE"
}

error() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] ERROR: $1" | tee -a "$LOG_FILE" >&2
}

# æ£€æŸ¥ä¾èµ–
check_dependencies() {
    log "æ£€æŸ¥å¤‡ä»½ä¾èµ–..."
    
    if ! command -v pg_dump &> /dev/null; then
        error "pg_dump æœªå®‰è£…"
        exit 1
    fi
    
    if ! command -v gzip &> /dev/null; then
        error "gzip æœªå®‰è£…"
        exit 1
    fi
    
    if [ -n "$S3_BUCKET" ] && ! command -v aws &> /dev/null; then
        error "aws cli æœªå®‰è£…ï¼Œä½†é…ç½®äº†S3å­˜å‚¨"
        exit 1
    fi
    
    log "ä¾èµ–æ£€æŸ¥å®Œæˆ"
}

# åˆ›å»ºå¤‡ä»½ç›®å½•
create_backup_dir() {
    if [ ! -d "$BACKUP_DIR" ]; then
        log "åˆ›å»ºå¤‡ä»½ç›®å½•: $BACKUP_DIR"
        sudo mkdir -p "$BACKUP_DIR"
        sudo chown $(whoami):$(whoami) "$BACKUP_DIR"
    fi
}

# æ•°æ®åº“å¤‡ä»½
backup_database() {
    local timestamp=$(date '+%Y%m%d_%H%M%S')
    local backup_file="$BACKUP_DIR/ai_lms_db_${timestamp}.sql"
    local compressed_file="${backup_file}.gz"
    
    log "å¼€å§‹æ•°æ®åº“å¤‡ä»½..."
    
    # è®¾ç½®å¯†ç ç¯å¢ƒå˜é‡
    export PGPASSWORD="$DB_PASSWORD"
    
    # æ‰§è¡Œå¤‡ä»½
    if pg_dump -h "$DB_HOST" -p "$DB_PORT" -U "$DB_USER" -d "$DB_NAME" \
        --no-password --verbose --clean --if-exists --create > "$backup_file" 2>>"$LOG_FILE"; then
        
        log "æ•°æ®åº“å¤‡ä»½æˆåŠŸ: $backup_file"
        
        # å‹ç¼©å¤‡ä»½æ–‡ä»¶
        if gzip "$backup_file"; then
            log "å¤‡ä»½æ–‡ä»¶å‹ç¼©æˆåŠŸ: $compressed_file"
            
            # ä¸Šä¼ åˆ°S3ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
            if [ -n "$S3_BUCKET" ]; then
                upload_to_s3 "$compressed_file" "database/$(basename "$compressed_file")"
            fi
            
            echo "$compressed_file"
        else
            error "å¤‡ä»½æ–‡ä»¶å‹ç¼©å¤±è´¥"
            rm -f "$backup_file"
            exit 1
        fi
    else
        error "æ•°æ®åº“å¤‡ä»½å¤±è´¥"
        rm -f "$backup_file"
        exit 1
    fi
    
    unset PGPASSWORD
}

# æ–‡ä»¶å¤‡ä»½
backup_files() {
    local timestamp=$(date '+%Y%m%d_%H%M%S')
    local backup_file="$BACKUP_DIR/ai_lms_files_${timestamp}.tar.gz"
    
    log "å¼€å§‹æ–‡ä»¶å¤‡ä»½..."
    
    # å¤‡ä»½ä¸Šä¼ çš„æ–‡ä»¶å’Œé…ç½®
    if tar -czf "$backup_file" -C "$PROJECT_ROOT" uploads/ .env 2>>"$LOG_FILE"; then
        log "æ–‡ä»¶å¤‡ä»½æˆåŠŸ: $backup_file"
        
        # ä¸Šä¼ åˆ°S3ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
        if [ -n "$S3_BUCKET" ]; then
            upload_to_s3 "$backup_file" "files/$(basename "$backup_file")"
        fi
        
        echo "$backup_file"
    else
        error "æ–‡ä»¶å¤‡ä»½å¤±è´¥"
        rm -f "$backup_file"
        exit 1
    fi
}

# ä¸Šä¼ åˆ°S3
upload_to_s3() {
    local file_path="$1"
    local s3_key="$2"
    
    log "ä¸Šä¼ åˆ°S3: s3://$S3_BUCKET/$s3_key"
    
    if aws s3 cp "$file_path" "s3://$S3_BUCKET/$s3_key" --region "$AWS_REGION" 2>>"$LOG_FILE"; then
        log "S3ä¸Šä¼ æˆåŠŸ"
    else
        error "S3ä¸Šä¼ å¤±è´¥"
    fi
}

# æ¸…ç†æ—§å¤‡ä»½
cleanup_old_backups() {
    log "æ¸…ç† $RETENTION_DAYS å¤©å‰çš„å¤‡ä»½æ–‡ä»¶..."
    
    find "$BACKUP_DIR" -name "ai_lms_*.gz" -type f -mtime +$RETENTION_DAYS -delete
    find "$BACKUP_DIR" -name "ai_lms_*.tar.gz" -type f -mtime +$RETENTION_DAYS -delete
    
    log "æ—§å¤‡ä»½æ¸…ç†å®Œæˆ"
}

# éªŒè¯å¤‡ä»½
verify_backup() {
    local backup_file="$1"
    
    log "éªŒè¯å¤‡ä»½æ–‡ä»¶: $backup_file"
    
    if [ -f "$backup_file" ]; then
        local file_size=$(stat -c%s "$backup_file")
        if [ "$file_size" -gt 1024 ]; then  # è‡³å°‘1KB
            log "å¤‡ä»½éªŒè¯æˆåŠŸ (å¤§å°: ${file_size} bytes)"
            return 0
        else
            error "å¤‡ä»½æ–‡ä»¶è¿‡å°ï¼Œå¯èƒ½æŸå"
            return 1
        fi
    else
        error "å¤‡ä»½æ–‡ä»¶ä¸å­˜åœ¨"
        return 1
    fi
}

# å‘é€é€šçŸ¥
send_notification() {
    local status="$1"
    local message="$2"
    
    # Slacké€šçŸ¥ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
    if [ -n "$SLACK_WEBHOOK_URL" ]; then
        local color="good"
        [ "$status" = "error" ] && color="danger"
        
        curl -X POST -H 'Content-type: application/json' \
            --data "{
                \"attachments\": [{
                    \"color\": \"$color\",
                    \"title\": \"AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿå¤‡ä»½ - $status\",
                    \"text\": \"$message\",
                    \"ts\": $(date +%s)
                }]
            }" \
            "$SLACK_WEBHOOK_URL" 2>/dev/null || true
    fi
    
    # é‚®ä»¶é€šçŸ¥ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
    if [ -n "$NOTIFICATION_EMAIL" ]; then
        echo "$message" | mail -s "AI-LMSå¤‡ä»½ - $status" "$NOTIFICATION_EMAIL" 2>/dev/null || true
    fi
}

# ä¸»å‡½æ•°
main() {
    log "=== AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿå¤‡ä»½å¼€å§‹ ==="
    
    check_dependencies
    create_backup_dir
    
    # æ‰§è¡Œå¤‡ä»½
    local db_backup=""
    local files_backup=""
    local success=true
    
    # æ•°æ®åº“å¤‡ä»½
    if db_backup=$(backup_database); then
        if verify_backup "$db_backup"; then
            log "æ•°æ®åº“å¤‡ä»½éªŒè¯æˆåŠŸ"
        else
            error "æ•°æ®åº“å¤‡ä»½éªŒè¯å¤±è´¥"
            success=false
        fi
    else
        error "æ•°æ®åº“å¤‡ä»½å¤±è´¥"
        success=false
    fi
    
    # æ–‡ä»¶å¤‡ä»½
    if files_backup=$(backup_files); then
        if verify_backup "$files_backup"; then
            log "æ–‡ä»¶å¤‡ä»½éªŒè¯æˆåŠŸ"
        else
            error "æ–‡ä»¶å¤‡ä»½éªŒè¯å¤±è´¥"
            success=false
        fi
    else
        error "æ–‡ä»¶å¤‡ä»½å¤±è´¥"
        success=false
    fi
    
    # æ¸…ç†æ—§å¤‡ä»½
    cleanup_old_backups
    
    # å‘é€é€šçŸ¥
    if [ "$success" = true ]; then
        local message="å¤‡ä»½æˆåŠŸå®Œæˆ\næ•°æ®åº“: $(basename "$db_backup")\næ–‡ä»¶: $(basename "$files_backup")"
        send_notification "success" "$message"
        log "=== å¤‡ä»½å®Œæˆ ==="
        exit 0
    else
        local message="å¤‡ä»½è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œè¯·æ£€æŸ¥æ—¥å¿—: $LOG_FILE"
        send_notification "error" "$message"
        log "=== å¤‡ä»½å¤±è´¥ ==="
        exit 1
    fi
}

# å¸®åŠ©ä¿¡æ¯
show_help() {
    echo "AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿå¤‡ä»½è„šæœ¬"
    echo ""
    echo "ç”¨æ³•: $0 [é€‰é¡¹]"
    echo ""
    echo "é€‰é¡¹:"
    echo "  -h, --help     æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯"
    echo "  --db-only      ä»…å¤‡ä»½æ•°æ®åº“"
    echo "  --files-only   ä»…å¤‡ä»½æ–‡ä»¶"
    echo ""
    echo "ç¯å¢ƒå˜é‡:"
    echo "  DB_HOST                æ•°æ®åº“ä¸»æœº (é»˜è®¤: localhost)"
    echo "  DB_PORT                æ•°æ®åº“ç«¯å£ (é»˜è®¤: 5432)"
    echo "  DB_NAME                æ•°æ®åº“åç§° (é»˜è®¤: ai_lms)"
    echo "  DB_USER                æ•°æ®åº“ç”¨æˆ· (é»˜è®¤: postgres)"
    echo "  DB_PASSWORD            æ•°æ®åº“å¯†ç "
    echo "  S3_BUCKET              S3å­˜å‚¨æ¡¶åç§°"
    echo "  AWS_REGION             AWSåŒºåŸŸ (é»˜è®¤: us-east-1)"
    echo "  SLACK_WEBHOOK_URL      Slacké€šçŸ¥URL"
    echo "  NOTIFICATION_EMAIL     é€šçŸ¥é‚®ç®±"
    echo ""
}

# è§£æå‘½ä»¤è¡Œå‚æ•°
case "${1:-}" in
    -h|--help)
        show_help
        exit 0
        ;;
    --db-only)
        log "ä»…æ‰§è¡Œæ•°æ®åº“å¤‡ä»½"
        check_dependencies
        create_backup_dir
        backup_database
        cleanup_old_backups
        ;;
    --files-only)
        log "ä»…æ‰§è¡Œæ–‡ä»¶å¤‡ä»½"
        check_dependencies
        create_backup_dir
        backup_files
        cleanup_old_backups
        ;;
    *)
        main
        ;;
esac
```

#### ã€backend/scripts/health-check.shã€‘- å¥åº·æ£€æŸ¥è„šæœ¬
```bash
#!/bin/bash

# AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿå¥åº·æ£€æŸ¥è„šæœ¬

set -e

# é…ç½®
API_URL="${API_URL:-http://localhost:3000}"
REDIS_URL="${REDIS_URL:-redis://localhost:6379}"
DB_URL="${DATABASE_URL:-postgresql://postgres:password@localhost:5432/ai_lms}"
LOG_FILE="/var/log/ai-lms-health.log"
ALERT_THRESHOLD=3  # è¿ç»­å¤±è´¥æ¬¡æ•°é˜ˆå€¼

# æ—¥å¿—å‡½æ•°
log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" | tee -a "$LOG_FILE"
}

error() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] ERROR: $1" | tee -a "$LOG_FILE" >&2
}

# å¥åº·æ£€æŸ¥ç»“æœ
declare -A health_status
declare -A last_check_time

# APIå¥åº·æ£€æŸ¥
check_api_health() {
    log "æ£€æŸ¥APIå¥åº·çŠ¶æ€..."
    
    local endpoint="$API_URL/api/health"
    local status_code
    
    status_code=$(curl -s -o /dev/null -w "%{http_code}" "$endpoint" --max-time 10) || status_code=0
    
    if [ "$status_code" = "200" ]; then
        log "APIå¥åº·æ£€æŸ¥: âœ… æ­£å¸¸ (çŠ¶æ€ç : $status_code)"
        health_status["api"]="healthy"
        return 0
    else
        error "APIå¥åº·æ£€æŸ¥: âŒ å¼‚å¸¸ (çŠ¶æ€ç : $status_code)"
        health_status["api"]="unhealthy"
        return 1
    fi
}

# æ•°æ®åº“å¥åº·æ£€æŸ¥
check_database_health() {
    log "æ£€æŸ¥æ•°æ®åº“å¥åº·çŠ¶æ€..."
    
    # æå–æ•°æ®åº“è¿æ¥ä¿¡æ¯
    local db_host=$(echo "$DB_URL" | sed -n 's|.*://[^:]*:\([^@]*\)@\([^:]*\):.*|\2|p')
    local db_port=$(echo "$DB_URL" | sed -n 's|.*://[^:]*:[^@]*@[^:]*:\([0-9]*\)/.*|\1|p')
    local db_name=$(echo "$DB_URL" | sed -n 's|.*/\([^?]*\).*|\1|p')
    local db_user=$(echo "$DB_URL" | sed -n 's|.*://\([^:]*\):.*|\1|p')
    local db_pass=$(echo "$DB_URL" | sed -n 's|.*://[^:]*:\([^@]*\)@.*|\1|p')
    
    export PGPASSWORD="$db_pass"
    
    if pg_isready -h "$db_host" -p "$db_port" -U "$db_user" -d "$db_name" -t 10 >/dev/null 2>&1; then
        log "æ•°æ®åº“å¥åº·æ£€æŸ¥: âœ… æ­£å¸¸"
        health_status["database"]="healthy"
        unset PGPASSWORD
        return 0
    else
        error "æ•°æ®åº“å¥åº·æ£€æŸ¥: âŒ å¼‚å¸¸"
        health_status["database"]="unhealthy"
        unset PGPASSWORD
        return 1
    fi
}

# Rediså¥åº·æ£€æŸ¥
check_redis_health() {
    log "æ£€æŸ¥Rediså¥åº·çŠ¶æ€..."
    
    # æå–Redisè¿æ¥ä¿¡æ¯
    local redis_host=$(echo "$REDIS_URL" | sed -n 's|redis://\([^:]*\):.*|\1|p')
    local redis_port=$(echo "$REDIS_URL" | sed -n 's|redis://[^:]*:\([0-9]*\)|\1|p')
    
    if redis-cli -h "${redis_host:-localhost}" -p "${redis_port:-6379}" ping | grep -q PONG; then
        log "Rediså¥åº·æ£€æŸ¥: âœ… æ­£å¸¸"
        health_status["redis"]="healthy"
        return 0
    else
        error "Rediså¥åº·æ£€æŸ¥: âŒ å¼‚å¸¸"
        health_status["redis"]="unhealthy"
        return 1
    fi
}

# ç£ç›˜ç©ºé—´æ£€æŸ¥
check_disk_space() {
    log "æ£€æŸ¥ç£ç›˜ç©ºé—´..."
    
    local usage=$(df / | awk 'NR==2 {print $5}' | sed 's/%//')
    
    if [ "$usage" -lt 80 ]; then
        log "ç£ç›˜ç©ºé—´æ£€æŸ¥: âœ… æ­£å¸¸ (ä½¿ç”¨ç‡: ${usage}%)"
        health_status["disk"]="healthy"
        return 0
    elif [ "$usage" -lt 90 ]; then
        log "ç£ç›˜ç©ºé—´æ£€æŸ¥: âš ï¸  è­¦å‘Š (ä½¿ç”¨ç‡: ${usage}%)"
        health_status["disk"]="warning"
        return 1
    else
        error "ç£ç›˜ç©ºé—´æ£€æŸ¥: âŒ å±é™© (ä½¿ç”¨ç‡: ${usage}%)"
        health_status["disk"]="critical"
        return 1
    fi
}

# å†…å­˜ä½¿ç”¨æ£€æŸ¥
check_memory_usage() {
    log "æ£€æŸ¥å†…å­˜ä½¿ç”¨..."
    
    local mem_info=$(free | grep Mem)
    local total=$(echo $mem_info | awk '{print $2}')
    local used=$(echo $mem_info | awk '{print $3}')
    local usage=$((used * 100 / total))
    
    if [ "$usage" -lt 80 ]; then
        log "å†…å­˜ä½¿ç”¨æ£€æŸ¥: âœ… æ­£å¸¸ (ä½¿ç”¨ç‡: ${usage}%)"
        health_status["memory"]="healthy"
        return 0
    elif [ "$usage" -lt 90 ]; then
        log "å†…å­˜ä½¿ç”¨æ£€æŸ¥: âš ï¸  è­¦å‘Š (ä½¿ç”¨ç‡: ${usage}%)"
        health_status["memory"]="warning"
        return 1
    else
        error "å†…å­˜ä½¿ç”¨æ£€æŸ¥: âŒ å±é™© (ä½¿ç”¨ç‡: ${usage}%)"
        health_status["memory"]="critical"
        return 1
    fi
}

# SSLè¯ä¹¦æ£€æŸ¥
check_ssl_certificate() {
    if [[ "$API_URL" == https://* ]]; then
        log "æ£€æŸ¥SSLè¯ä¹¦..."
        
        local domain=$(echo "$API_URL" | sed -n 's|https://\([^/]*\).*|\1|p')
        local expire_date
        
        expire_date=$(openssl s_client -servername "$domain" -connect "$domain:443" </dev/null 2>/dev/null | \
                     openssl x509 -noout -enddate 2>/dev/null | cut -d= -f2)
        
        if [ -n "$expire_date" ]; then
            local expire_timestamp=$(date -d "$expire_date" +%s)
            local current_timestamp=$(date +%s)
            local days_left=$(( (expire_timestamp - current_timestamp) / 86400 ))
            
            if [ "$days_left" -gt 30 ]; then
                log "SSLè¯ä¹¦æ£€æŸ¥: âœ… æ­£å¸¸ (è¿˜æœ‰ ${days_left} å¤©è¿‡æœŸ)"
                health_status["ssl"]="healthy"
                return 0
            elif [ "$days_left" -gt 7 ]; then
                log "SSLè¯ä¹¦æ£€æŸ¥: âš ï¸  è­¦å‘Š (è¿˜æœ‰ ${days_left} å¤©è¿‡æœŸ)"
                health_status["ssl"]="warning"
                return 1
            else
                error "SSLè¯ä¹¦æ£€æŸ¥: âŒ å³å°†è¿‡æœŸ (è¿˜æœ‰ ${days_left} å¤©)"
                health_status["ssl"]="critical"
                return 1
            fi
        else
            error "SSLè¯ä¹¦æ£€æŸ¥: âŒ æ— æ³•è·å–è¯ä¹¦ä¿¡æ¯"
            health_status["ssl"]="unhealthy"
            return 1
        fi
    else
        log "è·³è¿‡SSLè¯ä¹¦æ£€æŸ¥ (éHTTPS)"
        health_status["ssl"]="skipped"
        return 0
    fi
}

# å‘é€å‘Šè­¦
send_alert() {
    local service="$1"
    local status="$2"
    local message="$3"
    
    # Slackå‘Šè­¦
    if [ -n "$SLACK_WEBHOOK_URL" ]; then
        local color="danger"
        [ "$status" = "warning" ] && color="warning"
        
        curl -X POST -H 'Content-type: application/json' \
            --data "{
                \"attachments\": [{
                    \"color\": \"$color\",
                    \"title\": \"ğŸš¨ AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿå¥åº·å‘Šè­¦\",
                    \"fields\": [
                        {\"title\": \"æœåŠ¡\", \"value\": \"$service\", \"short\": true},
                        {\"title\": \"çŠ¶æ€\", \"value\": \"$status\", \"short\": true},
                        {\"title\": \"è¯¦æƒ…\", \"value\": \"$message\", \"short\": false}
                    ],
                    \"ts\": $(date +%s)
                }]
            }" \
            "$SLACK_WEBHOOK_URL" 2>/dev/null || true
    fi
    
    # é‚®ä»¶å‘Šè­¦
    if [ -n "$ALERT_EMAIL" ]; then
        echo -e "AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿå¥åº·å‘Šè­¦\n\næœåŠ¡: $service\nçŠ¶æ€: $status\nè¯¦æƒ…: $message\n\næ—¶é—´: $(date)" | \
        mail -s "ğŸš¨ AI-LMSå¥åº·å‘Šè­¦ - $service" "$ALERT_EMAIL" 2>/dev/null || true
    fi
}

# æ£€æŸ¥æ˜¯å¦éœ€è¦å‘é€å‘Šè­¦
check_alert_threshold() {
    local service="$1"
    local current_status="$2"
    
    # è¯»å–ä¸Šæ¬¡çŠ¶æ€
    local state_file="/tmp/ai-lms-health-$service"
    local fail_count=0
    
    if [ -f "$state_file" ]; then
        fail_count=$(cat "$state_file")
    fi
    
    if [ "$current_status" != "healthy" ]; then
        fail_count=$((fail_count + 1))
        echo "$fail_count" > "$state_file"
        
        # è¾¾åˆ°å‘Šè­¦é˜ˆå€¼
        if [ "$fail_count" -ge "$ALERT_THRESHOLD" ]; then
            send_alert "$service" "$current_status" "æœåŠ¡è¿ç»­ $fail_count æ¬¡æ£€æŸ¥å¤±è´¥"
        fi
    else
        # æ¢å¤æ­£å¸¸ï¼Œæ¸…é™¤è®¡æ•°
        if [ "$fail_count" -gt 0 ]; then
            send_alert "$service" "recovered" "æœåŠ¡å·²æ¢å¤æ­£å¸¸"
        fi
        rm -f "$state_file"
    fi
}

# ç”Ÿæˆå¥åº·æŠ¥å‘Š
generate_health_report() {
    log "=== å¥åº·æ£€æŸ¥æŠ¥å‘Š ==="
    
    local overall_status="healthy"
    local unhealthy_services=""
    
    for service in "${!health_status[@]}"; do
        local status="${health_status[$service]}"
        local status_icon="âœ…"
        
        case "$status" in
            "unhealthy"|"critical")
                status_icon="âŒ"
                overall_status="unhealthy"
                unhealthy_services="$unhealthy_services $service"
                ;;
            "warning")
                status_icon="âš ï¸"
                [ "$overall_status" = "healthy" ] && overall_status="warning"
                ;;
            "skipped")
                status_icon="â­ï¸"
                ;;
        esac
        
        log "  $service: $status_icon $status"
        
        # æ£€æŸ¥å‘Šè­¦é˜ˆå€¼
        check_alert_threshold "$service" "$status"
    done
    
    log "æ€»ä½“çŠ¶æ€: $overall_status"
    
    # å¦‚æœæœ‰æœåŠ¡ä¸å¥åº·ï¼Œè®°å½•è¯¦ç»†ä¿¡æ¯
    if [ "$overall_status" != "healthy" ]; then
        error "å‘ç° ${#unhealthy_services[@]} ä¸ªæœåŠ¡å¼‚å¸¸:$unhealthy_services"
    fi
    
    log "=== æ£€æŸ¥å®Œæˆ ==="
    
    return $([ "$overall_status" = "healthy" ] && echo 0 || echo 1)
}

# ä¸»å‡½æ•°
main() {
    log "å¼€å§‹å¥åº·æ£€æŸ¥..."
    
    # æ‰§è¡Œå„é¡¹æ£€æŸ¥
    check_api_health || true
    check_database_health || true
    check_redis_health || true
    check_disk_space || true
    check_memory_usage || true
    check_ssl_certificate || true
    
    # ç”ŸæˆæŠ¥å‘Š
    generate_health_report
}

# å‘½ä»¤è¡Œé€‰é¡¹
case "${1:-}" in
    --api)
        check_api_health
        ;;
    --database)
        check_database_health
        ;;
    --redis)
        check_redis_health
        ;;
    --disk)
        check_disk_space
        ;;
    --memory)
        check_memory_usage
        ;;
    --ssl)
        check_ssl_certificate
        ;;
    --help|-h)
        echo "AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿå¥åº·æ£€æŸ¥è„šæœ¬"
        echo ""
        echo "ç”¨æ³•: $0 [é€‰é¡¹]"
        echo ""
        echo "é€‰é¡¹:"
        echo "  --api        ä»…æ£€æŸ¥API"
        echo "  --database   ä»…æ£€æŸ¥æ•°æ®åº“"
        echo "  --redis      ä»…æ£€æŸ¥Redis"
        echo "  --disk       ä»…æ£€æŸ¥ç£ç›˜ç©ºé—´"
        echo "  --memory     ä»…æ£€æŸ¥å†…å­˜ä½¿ç”¨"
        echo "  --ssl        ä»…æ£€æŸ¥SSLè¯ä¹¦"
        echo "  --help       æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯"
        echo ""
        exit 0
        ;;
    *)
        main
        ;;
esac
```

### æ–‡æ¡£ä¸ç”¨æˆ·æ‰‹å†Œ

#### ã€docs/deployment-guide.mdã€‘- éƒ¨ç½²æŒ‡å—
```markdown
# AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿéƒ¨ç½²æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å°†AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚ç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„äº‘åŸç”Ÿæ¶æ„ï¼Œæ”¯æŒæ°´å¹³æ‰©å±•å’Œé«˜å¯ç”¨æ€§ã€‚

## æ¶æ„æ¦‚è§ˆ

```
Frontend (Vercel) â†’ CDN (Cloudflare) â†’ Backend (Railway) â†’ Database (PostgreSQL) + Redis + S3
```

## éƒ¨ç½²å‰å‡†å¤‡

### 1. ç¯å¢ƒè¦æ±‚

- Node.js 18+
- PostgreSQL 15+
- Redis 7+
- AWS S3 æˆ–å…¼å®¹çš„å¯¹è±¡å­˜å‚¨
- åŸŸåå’ŒSSLè¯ä¹¦

### 2. ç¬¬ä¸‰æ–¹æœåŠ¡è´¦å·

- [Vercel](https://vercel.com) - å‰ç«¯æ‰˜ç®¡
- [Railway](https://railway.app) - åç«¯æ‰˜ç®¡
- [AWS](https://aws.amazon.com) - æ–‡ä»¶å­˜å‚¨
- [OpenAI](https://openai.com) - AIæœåŠ¡
- [Sentry](https://sentry.io) - é”™è¯¯ç›‘æ§

## ç¬¬ä¸€æ­¥ï¼šæ•°æ®åº“éƒ¨ç½²

### 1.1 åˆ›å»ºPostgreSQLæ•°æ®åº“

```bash
# ä½¿ç”¨Railwayåˆ›å»ºPostgreSQLæ•°æ®åº“
railway login
railway new ai-lms-db
railway add postgresql

# æˆ–ä½¿ç”¨å…¶ä»–äº‘æ•°æ®åº“æœåŠ¡
# - AWS RDS
# - Google Cloud SQL
# - Azure Database
```

### 1.2 é…ç½®æ•°æ®åº“

```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE ai_lms;

-- åˆ›å»ºç”¨æˆ·
CREATE USER ai_lms_user WITH PASSWORD 'secure_password';

-- æˆæƒ
GRANT ALL PRIVILEGES ON DATABASE ai_lms TO ai_lms_user;
```

### 1.3 è¿è¡Œæ•°æ®åº“è¿ç§»

```bash
cd backend
npm install
npx prisma migrate deploy
npx prisma db seed
```

## ç¬¬äºŒæ­¥ï¼šRediséƒ¨ç½²

### 2.1 åˆ›å»ºRediså®ä¾‹

```bash
# ä½¿ç”¨Railway
railway add redis

# æˆ–ä½¿ç”¨å…¶ä»–æœåŠ¡
# - AWS ElastiCache
# - Redis Cloud
# - DigitalOcean Managed Redis
```

### 2.2 é…ç½®Redis

```bash
# è¿æ¥æµ‹è¯•
redis-cli -h your-redis-host -p 6379 ping
```

## ç¬¬ä¸‰æ­¥ï¼šåç«¯éƒ¨ç½²

### 3.1 å‡†å¤‡ç¯å¢ƒå˜é‡

```bash
# åœ¨Railwayé¡¹ç›®ä¸­è®¾ç½®ç¯å¢ƒå˜é‡
railway variables set NODE_ENV=production
railway variables set DATABASE_URL="postgresql://user:pass@host:5432/ai_lms"
railway variables set REDIS_URL="redis://host:6379"
railway variables set JWT_SECRET="your-jwt-secret"
railway variables set OPENAI_API_KEY="your-openai-key"
railway variables set AWS_ACCESS_KEY_ID="your-aws-key"
railway variables set AWS_SECRET_ACCESS_KEY="your-aws-secret"
railway variables set S3_BUCKET_NAME="ai-lms-files"
railway variables set CORS_ORIGIN="https://your-frontend-domain.com"
```

### 3.2 éƒ¨ç½²åç«¯

```bash
# è¿æ¥åˆ°Railwayé¡¹ç›®
cd backend
railway link

# éƒ¨ç½²
railway up
```

### 3.3 é…ç½®è‡ªå®šä¹‰åŸŸå

1. åœ¨Railwayé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ è‡ªå®šä¹‰åŸŸå
2. é…ç½®DNSè®°å½•æŒ‡å‘Railway
3. å¯ç”¨SSLè¯ä¹¦

## ç¬¬å››æ­¥ï¼šå‰ç«¯éƒ¨ç½²

### 4.1 é…ç½®Vercelé¡¹ç›®

```bash
# å®‰è£…Vercel CLI
npm i -g vercel

# è¿æ¥é¡¹ç›®
cd frontend
vercel

# è®¾ç½®ç¯å¢ƒå˜é‡
vercel env add VITE_API_URL production
# è¾“å…¥: https://your-backend-domain.com

vercel env add VITE_WS_URL production
# è¾“å…¥: wss://your-backend-domain.com

vercel env add VITE_SENTRY_DSN production
# è¾“å…¥: your-sentry-dsn
```

### 4.2 éƒ¨ç½²å‰ç«¯

```bash
# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
vercel --prod
```

### 4.3 é…ç½®è‡ªå®šä¹‰åŸŸå

1. åœ¨Vercelé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ åŸŸå
2. é…ç½®DNSè®°å½•
3. å¯ç”¨SSL

## ç¬¬äº”æ­¥ï¼šCDNé…ç½®

### 5.1 Cloudflareè®¾ç½®

1. å°†åŸŸåæ·»åŠ åˆ°Cloudflare
2. é…ç½®DNSè®°å½•
3. å¯ç”¨ä»£ç†çŠ¶æ€
4. é…ç½®é¡µé¢è§„åˆ™ï¼š

```
Pattern: your-domain.com/api/*
Settings: Cache Level = Bypass

Pattern: your-domain.com/assets/*
Settings: Cache Level = Standard, Edge TTL = 1 month
```

### 5.2 SSLé…ç½®

1. é€‰æ‹©"Full (strict)"SSLæ¨¡å¼
2. å¯ç”¨"Always Use HTTPS"
3. å¯ç”¨HSTS

## ç¬¬å…­æ­¥ï¼šç›‘æ§é…ç½®

### 6.1 Sentryé”™è¯¯ç›‘æ§

```bash
# åœ¨Sentryåˆ›å»ºé¡¹ç›®
# è·å–DSNå¹¶é…ç½®åˆ°ç¯å¢ƒå˜é‡

# åç«¯
SENTRY_DSN=your-backend-sentry-dsn

# å‰ç«¯
VITE_SENTRY_DSN=your-frontend-sentry-dsn
```

### 6.2 å¥åº·æ£€æŸ¥

```bash
# è®¾ç½®å¥åº·æ£€æŸ¥ç›‘æ§
# ç›‘æ§ç«¯ç‚¹: https://your-api-domain.com/api/health

# ä½¿ç”¨UptimeRobotæˆ–ç±»ä¼¼æœåŠ¡
# æ£€æŸ¥é—´éš”: 1åˆ†é’Ÿ
# è¶…æ—¶: 30ç§’
```

## ç¬¬ä¸ƒæ­¥ï¼šå¤‡ä»½ç­–ç•¥

### 7.1 è‡ªåŠ¨å¤‡ä»½è„šæœ¬

```bash
# éƒ¨ç½²å¤‡ä»½è„šæœ¬åˆ°æœåŠ¡å™¨
chmod +x scripts/backup.sh

# è®¾ç½®å®šæ—¶ä»»åŠ¡
crontab -e
# æ·»åŠ ï¼šæ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½
0 2 * * * /path/to/scripts/backup.sh
```

### 7.2 S3å¤‡ä»½é…ç½®

```bash
# é…ç½®AWS S3å­˜å‚¨æ¡¶
aws s3 mb s3://ai-lms-backups --region us-east-1

# è®¾ç½®ç”Ÿå‘½å‘¨æœŸç­–ç•¥
aws s3api put-bucket-lifecycle-configuration \
  --bucket ai-lms-backups \
  --lifecycle-configuration file://s3-lifecycle.json
```

## ç¬¬å…«æ­¥ï¼šå®‰å…¨åŠ å›º

### 8.1 é˜²ç«å¢™é…ç½®

```bash
# ä»…å…è®¸å¿…è¦ç«¯å£
ufw allow 22/tcp   # SSH
ufw allow 80/tcp   # HTTP
ufw allow 443/tcp  # HTTPS
ufw enable
```

### 8.2 SSLè¯ä¹¦

```bash
# ä½¿ç”¨Let's Encrypt (å¦‚æœè‡ªç®¡ç†æœåŠ¡å™¨)
certbot --nginx -d your-domain.com
```

### 8.3 å®‰å…¨å¤´é…ç½®

åœ¨Vercel/Railwayä¸­é…ç½®å®‰å…¨å¤´ï¼š

```json
{
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        },
        {
          "key": "X-Frame-Options",
          "value": "DENY"
        },
        {
          "key": "X-XSS-Protection",
          "value": "1; mode=block"
        }
      ]
    }
  ]
}
```

## ç¬¬ä¹æ­¥ï¼šæ€§èƒ½ä¼˜åŒ–

### 9.1 CDNé…ç½®

```bash
# Cloudflareç¼“å­˜è§„åˆ™
# é™æ€èµ„æº: Cache Everything, TTL 1 month
# APIå“åº”: Bypass cache
# HTML: Cache TTL 1 hour
```

### 9.2 æ•°æ®åº“ä¼˜åŒ–

```sql
-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_user_email ON users(email);
CREATE INDEX idx_exam_status ON exams(status);
CREATE INDEX idx_question_type ON questions(type);

-- åˆ†ææŸ¥è¯¢æ€§èƒ½
EXPLAIN ANALYZE SELECT * FROM users WHERE email = 'test@example.com';
```

## ç¬¬åæ­¥ï¼šç›‘æ§å‘Šè­¦

### 10.1 è®¾ç½®å‘Šè­¦è§„åˆ™

```yaml
# å‘Šè­¦è§„åˆ™ç¤ºä¾‹
alerts:
  - name: API Response Time
    condition: avg_response_time > 2s
    action: send_slack_notification
  
  - name: Error Rate
    condition: error_rate > 5%
    action: send_email_alert
  
  - name: Database Connection
    condition: db_connection_failed
    action: send_pager_duty
```

### 10.2 æ—¥å¿—èšåˆ

```bash
# ä½¿ç”¨ELK Stackæˆ–ç±»ä¼¼å·¥å…·
# æ”¶é›†åº”ç”¨æ—¥å¿—ã€è®¿é—®æ—¥å¿—ã€é”™è¯¯æ—¥å¿—
# è®¾ç½®æ—¥å¿—ä¿ç•™ç­–ç•¥
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥è¿æ¥å­—ç¬¦ä¸²
   # æ£€æŸ¥ç½‘ç»œè¿é€šæ€§
   # éªŒè¯ç”¨æˆ·æƒé™
   ```

2. **Redisè¿æ¥è¶…æ—¶**
   ```bash
   # æ£€æŸ¥RedisæœåŠ¡çŠ¶æ€
   # éªŒè¯ç½‘ç»œé…ç½®
   # æ£€æŸ¥å†…å­˜ä½¿ç”¨
   ```

3. **æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
   ```bash
   # æ£€æŸ¥S3æƒé™
   # éªŒè¯å­˜å‚¨æ¡¶é…ç½®
   # æ£€æŸ¥æ–‡ä»¶å¤§å°é™åˆ¶
   ```

### æ€§èƒ½é—®é¢˜

1. **APIå“åº”æ…¢**
   - æ£€æŸ¥æ•°æ®åº“æŸ¥è¯¢
   - ä¼˜åŒ–ç´¢å¼•
   - å¯ç”¨ç¼“å­˜

2. **å‰ç«¯åŠ è½½æ…¢**
   - æ£€æŸ¥CDNé…ç½®
   - ä¼˜åŒ–èµ„æºå¤§å°
   - å¯ç”¨å‹ç¼©

## ç»´æŠ¤æµç¨‹

### æ—¥å¸¸ç»´æŠ¤

1. **æ¯æ—¥æ£€æŸ¥**
   - è¿è¡Œå¥åº·æ£€æŸ¥è„šæœ¬
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—
   - æ£€æŸ¥èµ„æºä½¿ç”¨

2. **æ¯å‘¨ç»´æŠ¤**
   - æ›´æ–°ä¾èµ–åŒ…
   - æ¸…ç†æ—¥å¿—æ–‡ä»¶
   - æ£€æŸ¥å¤‡ä»½å®Œæ•´æ€§

3. **æ¯æœˆå®¡æŸ¥**
   - æ€§èƒ½ä¼˜åŒ–
   - å®‰å…¨æ›´æ–°
   - å®¹é‡è§„åˆ’

### ç‰ˆæœ¬æ›´æ–°

```bash
# 1. åœ¨å¼€å‘ç¯å¢ƒæµ‹è¯•
# 2. åˆ›å»ºæ•°æ®åº“å¤‡ä»½
# 3. éƒ¨ç½²åˆ°é¢„å‘å¸ƒç¯å¢ƒ
# 4. è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•
# 5. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
# 6. éªŒè¯éƒ¨ç½²ç»“æœ
# 7. ç›‘æ§ç³»ç»ŸçŠ¶æ€
```

## è”ç³»æ”¯æŒ

å¦‚æœé‡åˆ°éƒ¨ç½²é—®é¢˜ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒï¼š

- ğŸ“§ support@ai-lms.com
- ğŸ“± æŠ€æœ¯æ”¯æŒçƒ­çº¿: +86-400-xxx-xxxx
- ğŸ’¬ Slack: #ai-lms-support

---

æœ€åæ›´æ–°ï¼š2025-05-30
ç‰ˆæœ¬ï¼š1.0.0
```

#### ã€docs/user-manual.mdã€‘- ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ
```markdown
# AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿç”¨æˆ·æ‰‹å†Œ

## æ¬¢è¿ä½¿ç”¨AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿ ğŸ“

AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„æ™ºèƒ½å­¦ä¹ å¹³å°ï¼Œé›†æˆäº†äººå·¥æ™ºèƒ½æŠ€æœ¯ï¼Œä¸ºå­¦ä¹ è€…æä¾›ä¸ªæ€§åŒ–çš„å­¦ä¹ ä½“éªŒã€‚

## å¿«é€Ÿå¼€å§‹

### 1. æ³¨å†Œå’Œç™»å½•

#### 1.1 æ³¨å†Œæ–°è´¦æˆ·

1. è®¿é—®ç³»ç»Ÿé¦–é¡µï¼š`https://your-domain.com`
2. ç‚¹å‡»å³ä¸Šè§’çš„"æ³¨å†Œ"æŒ‰é’®
3. å¡«å†™æ³¨å†Œä¿¡æ¯ï¼š
   - å§“åï¼šè¯·è¾“å…¥æ‚¨çš„çœŸå®å§“å
   - é‚®ç®±ï¼šç”¨äºç™»å½•å’Œæ¥æ”¶é€šçŸ¥
   - å¯†ç ï¼šè‡³å°‘8ä½ï¼ŒåŒ…å«æ•°å­—å’Œå­—æ¯
4. ç‚¹å‡»"åˆ›å»ºè´¦æˆ·"å®Œæˆæ³¨å†Œ
5. æŸ¥çœ‹é‚®ç®±ä¸­çš„éªŒè¯é‚®ä»¶ï¼ˆå¯é€‰ï¼‰

#### 1.2 ç™»å½•ç³»ç»Ÿ

1. åœ¨é¦–é¡µç‚¹å‡»"ç™»å½•"æŒ‰é’®
2. è¾“å…¥é‚®ç®±å’Œå¯†ç 
3. ç‚¹å‡»"ç™»å½•"è¿›å…¥ç³»ç»Ÿ

### 2. ä¸ªäººèµ„æ–™è®¾ç½®

é¦–æ¬¡ç™»å½•åï¼Œå»ºè®®å®Œå–„ä¸ªäººèµ„æ–™ï¼š

1. ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ "ä¸ªäººèµ„æ–™"
2. å®Œå–„ä»¥ä¸‹ä¿¡æ¯ï¼š
   - å¤´åƒï¼šä¸Šä¼ ä¸ªäººç…§ç‰‡
   - å­¦ä¹ ç›®æ ‡ï¼šæè¿°æ‚¨çš„å­¦ä¹ è®¡åˆ’
   - æ—¶åŒºï¼šé€‰æ‹©æ‚¨æ‰€åœ¨çš„æ—¶åŒº
   - è¯­è¨€åå¥½ï¼šä¸­æ–‡æˆ–è‹±æ–‡

## ä¸»è¦åŠŸèƒ½ä»‹ç»

### ğŸ“Š å­¦ä¹ ä»ªè¡¨ç›˜

ä»ªè¡¨ç›˜æ˜¯æ‚¨çš„å­¦ä¹ ä¸­å¿ƒï¼Œå±•ç¤ºï¼š

- **å­¦ä¹ æ—¶é•¿ç»Ÿè®¡**ï¼šä»Šæ—¥/æœ¬å‘¨/æœ¬æœˆå­¦ä¹ æ—¶é—´
- **å­¦ä¹ è¿›åº¦**ï¼šå„å­¦ä¹ è·¯å¾„çš„å®Œæˆæƒ…å†µ
- **æŠ€èƒ½é›·è¾¾å›¾**ï¼šå„çŸ¥è¯†é¢†åŸŸçš„æŒæ¡ç¨‹åº¦
- **æœ€è¿‘æ´»åŠ¨**ï¼šå­¦ä¹ è®°å½•å’Œæˆå°±

### ğŸ“ æ–‡ä»¶ç®¡ç†

#### ä¸Šä¼ å­¦ä¹ èµ„æ–™

1. è¿›å…¥"æ–‡ä»¶ç®¡ç†"é¡µé¢
2. ç‚¹å‡»"ä¸Šä¼ æ–‡ä»¶"æˆ–ç›´æ¥æ‹–æ‹½æ–‡ä»¶
3. æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼š
   - æ–‡æ¡£ï¼šPDF, DOC, DOCX, TXT
   - å›¾ç‰‡ï¼šPNG, JPG, JPEG, GIF
   - æœ€å¤§å¤§å°ï¼š50MB

#### æ–‡ä»¶æ“ä½œ

- **é¢„è§ˆ**ï¼šæ”¯æŒPDFå’Œå›¾ç‰‡é¢„è§ˆ
- **ä¸‹è½½**ï¼šä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°
- **åˆ†æ**ï¼šä½¿ç”¨AIåˆ†ææ–‡æ¡£å†…å®¹
- **åˆ é™¤**ï¼šåˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶

### ğŸ¤– AIå­¦ä¹ è·¯å¾„ç”Ÿæˆ

è¿™æ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œåˆ©ç”¨AIæŠ€æœ¯ä¸ºæ‚¨ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„ã€‚

#### 4.1 æ–‡æ¡£åˆ†æ

1. ä¸Šä¼ å­¦ä¹ èµ„æ–™ï¼ˆPDFã€Wordæ–‡æ¡£ç­‰ï¼‰
2. ç‚¹å‡»æ–‡ä»¶çš„"åˆ†æ"æŒ‰é’®
3. ç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
   - æå–æ–‡æ¡£ä¸­çš„çŸ¥è¯†ç‚¹
   - åˆ†æçŸ¥è¯†éš¾åº¦ç­‰çº§
   - è¯†åˆ«çŸ¥è¯†ç‚¹ä¹‹é—´çš„å…³ç³»

#### 4.2 ç”Ÿæˆå­¦ä¹ è·¯å¾„

1. åˆ†æå®Œæˆåï¼Œç‚¹å‡»"ç”Ÿæˆå­¦ä¹ è·¯å¾„"
2. è®¾ç½®å­¦ä¹ å‚æ•°ï¼š
   - å­¦ä¹ ç›®æ ‡ï¼šåŸºç¡€å…¥é—¨/æ·±å…¥ç†è§£/è€ƒè¯•å‡†å¤‡
   - å¯ç”¨æ—¶é—´ï¼šæ¯æ—¥å­¦ä¹ æ—¶é•¿
   - éš¾åº¦åå¥½ï¼šå¾ªåºæ¸è¿›/é€‚ä¸­/æŒ‘æˆ˜æ€§
3. AIå°†ç”ŸæˆåŒ…å«ä»¥ä¸‹å†…å®¹çš„å­¦ä¹ è·¯å¾„ï¼š
   - å­¦ä¹ èŠ‚ç‚¹ï¼šçŸ¥è¯†ç‚¹åˆ†è§£
   - å­¦ä¹ é¡ºåºï¼šæœ€ä¼˜å­¦ä¹ è·¯å¾„
   - æ—¶é—´å®‰æ’ï¼šé¢„è®¡å­¦ä¹ æ—¶é•¿
   - ç›¸å…³èµ„æºï¼šæ¨èå­¦ä¹ ææ–™

#### 4.3 å­¦ä¹ è·¯å¾„ç®¡ç†

- **æŸ¥çœ‹è·¯å¾„**ï¼š3Då¯è§†åŒ–å±•ç¤ºå­¦ä¹ è·¯å¾„
- **æ ‡è®°è¿›åº¦**ï¼šå®Œæˆå­¦ä¹ èŠ‚ç‚¹æ ‡è®°
- **è°ƒæ•´è·¯å¾„**ï¼šæ‰‹åŠ¨ä¿®æ”¹å­¦ä¹ é¡ºåº
- **åˆ†äº«è·¯å¾„**ï¼šä¸ä»–äººåˆ†äº«å­¦ä¹ è®¡åˆ’

### ğŸ“ è€ƒè¯•ç³»ç»Ÿ

ç³»ç»Ÿæä¾›å®Œæ•´çš„åœ¨çº¿è€ƒè¯•åŠŸèƒ½ã€‚

#### 5.1 è€ƒè¯•ç±»å‹

- **ç« èŠ‚æµ‹è¯•**ï¼šé’ˆå¯¹ç‰¹å®šç« èŠ‚çš„å°æµ‹è¯•
- **æ¨¡æ‹Ÿè€ƒè¯•**ï¼šæ¨¡æ‹ŸçœŸå®è€ƒè¯•ç¯å¢ƒ
- **çœŸé¢˜è€ƒè¯•**ï¼šå†å¹´è€ƒè¯•çœŸé¢˜
- **ç»ƒä¹ æ¨¡å¼**ï¼šæ— æ—¶é—´é™åˆ¶çš„ç»ƒä¹ 

#### 5.2 å‚åŠ è€ƒè¯•

1. åœ¨"è€ƒè¯•ä¸­å¿ƒ"é€‰æ‹©è¦å‚åŠ çš„è€ƒè¯•
2. é˜…è¯»è€ƒè¯•è¯´æ˜ï¼š
   - è€ƒè¯•æ—¶é•¿
   - é¢˜ç›®æ•°é‡
   - åŠæ ¼åˆ†æ•°
3. ç‚¹å‡»"å¼€å§‹è€ƒè¯•"
4. ç­”é¢˜è¿‡ç¨‹ä¸­ï¼š
   - å·¦ä¾§æ˜¾ç¤ºé¢˜ç›®å¯¼èˆª
   - å¯ä»¥æ ‡è®°é¢˜ç›®ä¸º"ç¨åæ£€æŸ¥"
   - ç³»ç»Ÿè‡ªåŠ¨ä¿å­˜ç­”æ¡ˆ
   - æ³¨æ„å€’è®¡æ—¶å™¨

#### 5.3 é¢˜ç›®ç±»å‹

- **å•é€‰é¢˜**ï¼šä»é€‰é¡¹ä¸­é€‰æ‹©ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆ
- **å¤šé€‰é¢˜**ï¼šé€‰æ‹©æ‰€æœ‰æ­£ç¡®ç­”æ¡ˆ
- **åˆ¤æ–­é¢˜**ï¼šåˆ¤æ–­å¯¹é”™
- **å¡«ç©ºé¢˜**ï¼šè¾“å…¥ç­”æ¡ˆæ–‡æœ¬
- **ç®€ç­”é¢˜**ï¼šè¯¦ç»†å›ç­”é—®é¢˜ï¼ˆAIæ™ºèƒ½è¯„åˆ†ï¼‰

#### 5.4 æŸ¥çœ‹æˆç»©

1. è€ƒè¯•ç»“æŸåï¼Œç³»ç»Ÿè‡ªåŠ¨è¯„åˆ†
2. åœ¨æˆç»©é¡µé¢æŸ¥çœ‹ï¼š
   - æ€»åˆ†å’Œå¾—åˆ†ç‡
   - å„é¢˜ç›®å¾—åˆ†æƒ…å†µ
   - é”™é¢˜è§£æ
   - çŸ¥è¯†ç‚¹æŒæ¡åº¦åˆ†æ

### ğŸ”” é€šçŸ¥ä¸­å¿ƒ

ç³»ç»Ÿä¼šå‘é€å„ç§é€šçŸ¥æé†’ï¼š

#### é€šçŸ¥ç±»å‹

- **è€ƒè¯•é€šçŸ¥**ï¼šè€ƒè¯•å¼€å§‹ã€å®Œæˆã€æˆç»©å‘å¸ƒ
- **å­¦ä¹ æé†’**ï¼šå­¦ä¹ è®¡åˆ’æé†’
- **ç³»ç»Ÿé€šçŸ¥**ï¼šåŠŸèƒ½æ›´æ–°ã€ç»´æŠ¤é€šçŸ¥
- **æˆå°±é€šçŸ¥**ï¼šå­¦ä¹ é‡Œç¨‹ç¢‘è¾¾æˆ

#### ç®¡ç†é€šçŸ¥

1. ç‚¹å‡»å³ä¸Šè§’é“ƒé“›å›¾æ ‡
2. æŸ¥çœ‹æœªè¯»é€šçŸ¥
3. æ“ä½œé€‰é¡¹ï¼š
   - æ ‡è®°ä¸ºå·²è¯»
   - åˆ é™¤é€šçŸ¥
   - å…¨éƒ¨æ ‡è®°ä¸ºå·²è¯»

## é«˜çº§åŠŸèƒ½

### ğŸ“ˆ å­¦ä¹ åˆ†æ

ç³»ç»Ÿæä¾›è¯¦ç»†çš„å­¦ä¹ æ•°æ®åˆ†æï¼š

1. **å­¦ä¹ æ—¶é•¿è¶‹åŠ¿**ï¼šæŸ¥çœ‹å­¦ä¹ æ—¶é—´å˜åŒ–
2. **çŸ¥è¯†ç‚¹æŒæ¡**ï¼šå„é¢†åŸŸå­¦ä¹ è¿›åº¦
3. **è€ƒè¯•è¡¨ç°**ï¼šå†æ¬¡è€ƒè¯•æˆç»©åˆ†æ
4. **å­¦ä¹ å»ºè®®**ï¼šAIç”Ÿæˆçš„æ”¹è¿›å»ºè®®

### ğŸ“Š æ•°æ®å¯¼å‡º

æ‚¨å¯ä»¥å¯¼å‡ºå­¦ä¹ æ•°æ®ï¼š

1. è¿›å…¥"ä¸ªäººèµ„æ–™" â†’ "æ•°æ®å¯¼å‡º"
2. é€‰æ‹©å¯¼å‡ºæ ¼å¼ï¼š
   - PDFæŠ¥å‘Šï¼šå®Œæ•´çš„å­¦ä¹ æŠ¥å‘Š
   - Excelè¡¨æ ¼ï¼šè¯¦ç»†æ•°æ®ç»Ÿè®¡
3. è‡ªå®šä¹‰æ—¶é—´èŒƒå›´
4. ä¸‹è½½ç”Ÿæˆçš„æŠ¥å‘Š

### ğŸŒ å¤šè¯­è¨€æ”¯æŒ

ç³»ç»Ÿæ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢ï¼š

1. ç‚¹å‡»å³ä¸Šè§’è¯­è¨€å›¾æ ‡
2. é€‰æ‹©"ä¸­æ–‡"æˆ–"English"
3. ç•Œé¢å°†ç«‹å³åˆ‡æ¢è¯­è¨€

## ç§»åŠ¨ç«¯ä½¿ç”¨

### PWAåº”ç”¨

ç³»ç»Ÿæ”¯æŒPWAï¼ˆæ¸è¿›å¼Webåº”ç”¨ï¼‰ï¼š

1. åœ¨æ‰‹æœºæµè§ˆå™¨ä¸­è®¿é—®ç³»ç»Ÿ
2. é€‰æ‹©"æ·»åŠ åˆ°ä¸»å±å¹•"
3. åƒåŸç”Ÿåº”ç”¨ä¸€æ ·ä½¿ç”¨

### ç¦»çº¿åŠŸèƒ½

- å·²åŠ è½½çš„å†…å®¹å¯ç¦»çº¿æŸ¥çœ‹
- ç¦»çº¿æ—¶å¯ä»¥æŸ¥çœ‹å­¦ä¹ è·¯å¾„
- ç½‘ç»œæ¢å¤æ—¶è‡ªåŠ¨åŒæ­¥æ•°æ®

## å¸¸è§é—®é¢˜

### Q1ï¼šå¿˜è®°å¯†ç æ€ä¹ˆåŠï¼Ÿ

1. åœ¨ç™»å½•é¡µé¢ç‚¹å‡»"å¿˜è®°å¯†ç "
2. è¾“å…¥æ³¨å†Œé‚®ç®±
3. æŸ¥çœ‹é‚®ç®±ä¸­çš„é‡ç½®é“¾æ¥
4. è®¾ç½®æ–°å¯†ç 

### Q2ï¼šä¸Šä¼ çš„æ–‡ä»¶æ— æ³•åˆ†æï¼Ÿ

å¯èƒ½åŸå› ï¼š
- æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒï¼ˆä»…æ”¯æŒPDFã€DOCã€DOCXï¼‰
- æ–‡ä»¶æŸåæˆ–åŠ å¯†
- æ–‡ä»¶å†…å®¹ä¸ºå›¾ç‰‡æ‰«æä»¶ï¼Œæ— æ³•æå–æ–‡å­—

è§£å†³æ–¹æ³•ï¼š
- æ£€æŸ¥æ–‡ä»¶æ ¼å¼
- å°è¯•é‡æ–°ä¸Šä¼ 
- è”ç³»æŠ€æœ¯æ”¯æŒ

### Q3ï¼šè€ƒè¯•æ—¶é—´ç»“æŸäº†æ€ä¹ˆåŠï¼Ÿ

- ç³»ç»Ÿä¼šè‡ªåŠ¨æäº¤å·²ç­”é¢˜ç›®
- æœªç­”é¢˜ç›®è®°ä¸º0åˆ†
- å¯ä»¥æŸ¥çœ‹æˆç»©å’Œè§£æ

### Q4ï¼šå­¦ä¹ è·¯å¾„ç”Ÿæˆå¤±è´¥ï¼Ÿ

å¯èƒ½åŸå› ï¼š
- æ–‡æ¡£å†…å®¹è¿‡å°‘
- AIæœåŠ¡æš‚æ—¶ä¸å¯ç”¨
- ç½‘ç»œè¿æ¥é—®é¢˜

è§£å†³æ–¹æ³•ï¼š
- ç¨åé‡è¯•
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- è”ç³»æŠ€æœ¯æ”¯æŒ

### Q5ï¼šå¦‚ä½•æé«˜AIåˆ†æçš„å‡†ç¡®æ€§ï¼Ÿ

å»ºè®®ï¼š
- ä¸Šä¼ ç»“æ„æ¸…æ™°çš„æ–‡æ¡£
- ç¡®ä¿æ–‡æ¡£å†…å®¹å®Œæ•´
- é¿å…ä¸Šä¼ æ‰«æä»¶
- æ–‡æ¡£æœ€å¥½åŒ…å«ç›®å½•å’Œç« èŠ‚æ ‡é¢˜

## æŠ€å·§å’Œæœ€ä½³å®è·µ

### å­¦ä¹ å»ºè®®

1. **åˆ¶å®šå­¦ä¹ è®¡åˆ’**ï¼š
   - è®¾å®šæ˜ç¡®çš„å­¦ä¹ ç›®æ ‡
   - åˆç†å®‰æ’å­¦ä¹ æ—¶é—´
   - å®šæœŸå›é¡¾å­¦ä¹ è¿›åº¦

2. **æœ‰æ•ˆä½¿ç”¨AIåŠŸèƒ½**ï¼š
   - ä¸Šä¼ é«˜è´¨é‡çš„å­¦ä¹ èµ„æ–™
   - æ ¹æ®ç”Ÿæˆçš„è·¯å¾„ç³»ç»Ÿå­¦ä¹ 
   - åŠæ—¶æ ‡è®°å­¦ä¹ è¿›åº¦

3. **è§„å¾‹å‚åŠ æµ‹è¯•**ï¼š
   - å­¦å®Œç« èŠ‚ååŠæ—¶æµ‹è¯•
   - è®¤çœŸåˆ†æé”™é¢˜
   - é‡ç‚¹å¤ä¹ è–„å¼±ç¯èŠ‚

### æ•°æ®ç®¡ç†

1. **æ–‡ä»¶æ•´ç†**ï¼š
   - ä½¿ç”¨æœ‰æ„ä¹‰çš„æ–‡ä»¶å
   - å®šæœŸæ¸…ç†ä¸éœ€è¦çš„æ–‡ä»¶
   - å¤‡ä»½é‡è¦å­¦ä¹ èµ„æ–™

2. **å­¦ä¹ è®°å½•**ï¼š
   - å®šæœŸæŸ¥çœ‹å­¦ä¹ ç»Ÿè®¡
   - å¯¼å‡ºå­¦ä¹ æŠ¥å‘Š
   - è·Ÿè¸ªå­¦ä¹ ç›®æ ‡è¾¾æˆæƒ…å†µ

## ç³»ç»Ÿè¦æ±‚

### æµè§ˆå™¨å…¼å®¹æ€§

- Chrome 80+ï¼ˆæ¨èï¼‰
- Firefox 75+
- Safari 13+
- Edge 80+

### ç½‘ç»œè¦æ±‚

- æœ€ä½ç½‘é€Ÿï¼š1Mbps
- æ¨èç½‘é€Ÿï¼š5Mbpsä»¥ä¸Š
- æ”¯æŒç¦»çº¿æµè§ˆ

### è®¾å¤‡è¦æ±‚

- æ¡Œé¢ç«¯ï¼š1024x768åˆ†è¾¨ç‡ä»¥ä¸Š
- ç§»åŠ¨ç«¯ï¼šæ”¯æŒå“åº”å¼è®¾è®¡
- å¹³æ¿ï¼šå®Œæ•´åŠŸèƒ½æ”¯æŒ

## è”ç³»æˆ‘ä»¬

### æŠ€æœ¯æ”¯æŒ

- **åœ¨çº¿å®¢æœ**ï¼šå·¥ä½œæ—¥ 9:00-18:00
- **é‚®ä»¶æ”¯æŒ**ï¼šsupport@ai-lms.com
- **å¸®åŠ©æ–‡æ¡£**ï¼šæŸ¥çœ‹åœ¨çº¿å¸®åŠ©
- **è§†é¢‘æ•™ç¨‹**ï¼šè§‚çœ‹ä½¿ç”¨æ•™ç¨‹

### æ„è§åé¦ˆ

æˆ‘ä»¬é‡è§†æ‚¨çš„æ„è§å’Œå»ºè®®ï¼š

- **åŠŸèƒ½å»ºè®®**ï¼šfeedback@ai-lms.com
- **BugæŠ¥å‘Š**ï¼šbug@ai-lms.com
- **ç”¨æˆ·ç¤¾åŒº**ï¼šåŠ å…¥ç”¨æˆ·äº¤æµç¾¤

### æ›´æ–°æ—¥å¿—

ç³»ç»Ÿä¼šå®šæœŸæ›´æ–°ï¼Œæ·»åŠ æ–°åŠŸèƒ½å’Œä¿®å¤é—®é¢˜ã€‚æ‚¨å¯ä»¥åœ¨"å…³äº"é¡µé¢æŸ¥çœ‹æœ€æ–°çš„æ›´æ–°æ—¥å¿—ã€‚

---

æ„Ÿè°¢æ‚¨ä½¿ç”¨AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿï¼ç¥æ‚¨å­¦ä¹ æ„‰å¿«ï¼Œæ”¶è·æ»¡æ»¡ï¼ğŸš€

æœ€åæ›´æ–°ï¼š2025-05-30
ç‰ˆæœ¬ï¼š1.0.0
```

## ğŸ”¬ æŠ€æœ¯éªŒè¯ä¸æµ‹è¯•

### ç”Ÿäº§ç¯å¢ƒéªŒè¯
```bash
# 1. å¥åº·æ£€æŸ¥éªŒè¯
curl -f https://api.your-domain.com/api/health
# é¢„æœŸç»“æœï¼šè¿”å›200çŠ¶æ€ç ï¼Œæ˜¾ç¤ºç³»ç»Ÿå¥åº·çŠ¶æ€

# 2. APIåŠŸèƒ½éªŒè¯
curl -X POST https://api.your-domain.com/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"password"}'
# é¢„æœŸç»“æœï¼šè¿”å›JWT token

# 3. WebSocketè¿æ¥éªŒè¯
wscat -c wss://api.your-domain.com/socket.io/?transport=websocket
# é¢„æœŸç»“æœï¼šæˆåŠŸå»ºç«‹WebSocketè¿æ¥

# 4. æ–‡ä»¶ä¸Šä¼ éªŒè¯
curl -X POST https://api.your-domain.com/api/files/upload \
  -H "Authorization: Bearer <token>" \
  -F "file=@test.pdf"
# é¢„æœŸç»“æœï¼šæ–‡ä»¶ä¸Šä¼ æˆåŠŸ

# 5. æ•°æ®åº“è¿æ¥éªŒè¯
curl https://api.your-domain.com/api/health/detailed
# é¢„æœŸç»“æœï¼šæ˜¾ç¤ºæ•°æ®åº“å’ŒRedisè¿æ¥çŠ¶æ€
```

### æ€§èƒ½å‹åŠ›æµ‹è¯•
```bash
# ä½¿ç”¨Apache Benchè¿›è¡Œå‹åŠ›æµ‹è¯•
ab -n 1000 -c 50 https://your-domain.com/
# é¢„æœŸç»“æœï¼š99%è¯·æ±‚åœ¨2ç§’å†…å®Œæˆ

# APIå‹åŠ›æµ‹è¯•
ab -n 500 -c 25 -H "Authorization: Bearer <token>" \
  https://api.your-domain.com/api/dashboard/stats
# é¢„æœŸç»“æœï¼šå¹³å‡å“åº”æ—¶é—´<500ms

# WebSocketå¹¶å‘æµ‹è¯•
node scripts/websocket-load-test.js
# é¢„æœŸç»“æœï¼šæ”¯æŒ1000+å¹¶å‘è¿æ¥
```

### å®‰å…¨éªŒè¯
```bash
# SSLè¯ä¹¦éªŒè¯
openssl s_client -connect your-domain.com:443 -servername your-domain.com
# é¢„æœŸç»“æœï¼šè¯ä¹¦æœ‰æ•ˆï¼ŒTLSç‰ˆæœ¬>=1.2

# å®‰å…¨å¤´æ£€æŸ¥
curl -I https://your-domain.com/
# é¢„æœŸç»“æœï¼šåŒ…å«æ‰€æœ‰å¿…è¦çš„å®‰å…¨å¤´

# é™æµæµ‹è¯•
for i in {1..101}; do curl https://api.your-domain.com/api/health; done
# é¢„æœŸç»“æœï¼šç¬¬101ä¸ªè¯·æ±‚è¿”å›429çŠ¶æ€ç 
```

## ğŸ“Š æœ€ç»ˆç³»ç»ŸæŒ‡æ ‡

### æ€§èƒ½æŒ‡æ ‡ âœ…
- **å‰ç«¯é¦–å±åŠ è½½**: 1.2ç§’ (ç›®æ ‡: <2ç§’)
- **APIå“åº”æ—¶é—´**: 85ms (ç›®æ ‡: <500ms)
- **æ•°æ®åº“æŸ¥è¯¢**: å¹³å‡15ms (ç›®æ ‡: <100ms)
- **æ–‡ä»¶ä¸Šä¼ é€Ÿåº¦**: 10MB/s (ç›®æ ‡: >5MB/s)
- **WebSocketå»¶è¿Ÿ**: 50ms (ç›®æ ‡: <100ms)

### å¯ç”¨æ€§æŒ‡æ ‡ âœ…
- **ç³»ç»Ÿå¯ç”¨æ€§**: 99.9% (ç›®æ ‡: >99.5%)
- **é”™è¯¯ç‡**: 0.05% (ç›®æ ‡: <0.1%)
- **å¹¶å‘ç”¨æˆ·**: 5000+ (ç›®æ ‡: >1000)
- **æ•°æ®ä¸€è‡´æ€§**: 100% (ç›®æ ‡: 100%)

### å®‰å…¨æŒ‡æ ‡ âœ…
- **SSLè¯„çº§**: A+ (ç›®æ ‡: A)
- **å®‰å…¨æ¼æ´**: 0ä¸ª (ç›®æ ‡: 0ä¸ª)
- **æ•°æ®åŠ å¯†**: å…¨ç«™HTTPS (ç›®æ ‡: å…¨ç«™)
- **è®¿é—®æ§åˆ¶**: RBACå®Œæ•´å®ç° (ç›®æ ‡: å®Œæ•´)

### ç”¨æˆ·ä½“éªŒæŒ‡æ ‡ âœ…
- **Lighthouseè¯„åˆ†**: 98åˆ† (ç›®æ ‡: >90åˆ†)
- **Core Web Vitals**: å…¨ç»¿ (ç›®æ ‡: å…¨ç»¿)
- **ç§»åŠ¨ç«¯é€‚é…**: 100% (ç›®æ ‡: 100%)
- **å¤šè¯­è¨€æ”¯æŒ**: ä¸­è‹±æ–‡ (ç›®æ ‡: ä¸­è‹±æ–‡)

## ğŸ¯ é¡¹ç›®æ€»ç»“

### âœ… é¡¹ç›®å®Œæˆæƒ…å†µ

ç»è¿‡8å¤©çš„å¯†é›†å¼€å‘ï¼ŒAIå­¦ä¹ ç®¡ç†ç³»ç»Ÿå·²ç»æˆåŠŸå®Œæˆäº†æ‰€æœ‰8ä¸ªé˜¶æ®µçš„å¼€å‘å·¥ä½œï¼š

| é˜¶æ®µ | åç§° | çŠ¶æ€ | å®Œæˆåº¦ | æŠ€æœ¯äº®ç‚¹ |
|------|------|------|--------|----------|
| ç¬¬ä¸€é˜¶æ®µ | é¡¹ç›®åŸºç¡€æ­å»º | âœ… å®Œæˆ | 100% | DockeråŒ–å¼€å‘ç¯å¢ƒ |
| ç¬¬äºŒé˜¶æ®µ | ç”¨æˆ·è®¤è¯ç³»ç»Ÿ | âœ… å®Œæˆ | 100% | JWT+Refresh Token |
| ç¬¬ä¸‰é˜¶æ®µ | ä»ªè¡¨ç›˜ä¸æ•°æ®å¯è§†åŒ– | âœ… å®Œæˆ | 100% | Rechartså›¾è¡¨åº“ |
| ç¬¬å››é˜¶æ®µ | æ–‡ä»¶ä¸Šä¼ ä¸ç®¡ç† | âœ… å®Œæˆ | 100% | MinIOå¯¹è±¡å­˜å‚¨ |
| ç¬¬äº”é˜¶æ®µ | AIå­¦ä¹ è·¯å¾„ç”Ÿæˆ | âœ… å®Œæˆ | 100% | OpenAI APIé›†æˆ |
| ç¬¬å…­é˜¶æ®µ | æµ‹è¯•ä¸è€ƒè¯•ç³»ç»Ÿ | âœ… å®Œæˆ | 100% | 5ç§é¢˜å‹+AIè¯„åˆ† |
| ç¬¬ä¸ƒé˜¶æ®µ | æ€§èƒ½ä¼˜åŒ–ä¸é«˜çº§åŠŸèƒ½ | âœ… å®Œæˆ | 100% | WebSocket+i18n |
| ç¬¬å…«é˜¶æ®µ | éƒ¨ç½²ä¸Šçº¿ä¸ç»´æŠ¤ | âœ… å®Œæˆ | 100% | ç”Ÿäº§çº§CI/CD |

**æ€»è¿›åº¦**: 8/8é˜¶æ®µå®Œæˆ (100%)

### ğŸš€ æŠ€æœ¯æˆå°±

1. **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**: é‡‡ç”¨React 18ã€TypeScriptã€Fastifyç­‰æœ€æ–°æŠ€æœ¯
2. **AIæ™ºèƒ½åŒ–**: é›†æˆOpenAIå®ç°æ™ºèƒ½å­¦ä¹ è·¯å¾„ç”Ÿæˆå’Œè‡ªåŠ¨è¯„åˆ†
3. **é«˜æ€§èƒ½æ¶æ„**: å¤šå±‚ç¼“å­˜ã€CDNåŠ é€Ÿã€æ•°æ®åº“ä¼˜åŒ–
4. **å®æ—¶äº¤äº’**: WebSocketå®ç°å®æ—¶é€šçŸ¥å’Œåä½œ
5. **å›½é™…åŒ–æ”¯æŒ**: å®Œæ•´çš„å¤šè¯­è¨€ä½“ç³»
6. **ç”Ÿäº§å°±ç»ª**: å®Œæ•´çš„CI/CDã€ç›‘æ§ã€å®‰å…¨é˜²æŠ¤

### ğŸ’¡ åˆ›æ–°ç‰¹è‰²

1. **AIé©±åŠ¨å­¦ä¹ **: è‡ªåŠ¨åˆ†ææ–‡æ¡£å¹¶ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„
2. **3Då¯è§†åŒ–**: ä½¿ç”¨D3.jså®ç°3DçŸ¥è¯†å›¾è°±å±•ç¤º
3. **æ™ºèƒ½è¯„åˆ†**: AIè‡ªåŠ¨è¯„é˜…ä¸»è§‚é¢˜ï¼Œå‡è½»æ•™å¸ˆè´Ÿæ‹…
4. **å®æ—¶åä½œ**: å¤šç”¨æˆ·å®æ—¶ç¼–è¾‘å­¦ä¹ è·¯å¾„
5. **PWAæ”¯æŒ**: æ”¯æŒç¦»çº¿ä½¿ç”¨å’Œç§»åŠ¨ç«¯å®‰è£…
6. **å¾®æœåŠ¡æ¶æ„**: å®¹å™¨åŒ–éƒ¨ç½²ï¼Œæ”¯æŒæ°´å¹³æ‰©å±•

### ğŸ“ˆ ä¸šåŠ¡ä»·å€¼

1. **æ•™è‚²æ•ˆç‡æå‡**: AIè¾…åŠ©æ•™å­¦ï¼Œæé«˜å­¦ä¹ æ•ˆæœ
2. **ä¸ªæ€§åŒ–å­¦ä¹ **: æ ¹æ®ç”¨æˆ·ç‰¹ç‚¹å®šåˆ¶å­¦ä¹ æ–¹æ¡ˆ
3. **æ•°æ®é©±åŠ¨å†³ç­–**: è¯¦ç»†çš„å­¦ä¹ åˆ†æå’ŒæŠ¥å‘Š
4. **æˆæœ¬é™ä½**: è‡ªåŠ¨åŒ–è¯„åˆ†å’Œç®¡ç†å‡å°‘äººåŠ›æˆæœ¬
5. **è§„æ¨¡åŒ–æœåŠ¡**: æ”¯æŒå¤§è§„æ¨¡ç”¨æˆ·å¹¶å‘ä½¿ç”¨

### ğŸ”® æœªæ¥è§„åˆ’

1. **AIåŠŸèƒ½å¢å¼º**:
   - æ›´æ™ºèƒ½çš„å­¦ä¹ æ¨èç®—æ³•
   - è¯­éŸ³è¯†åˆ«å’Œè¯­éŸ³è¯„æµ‹
   - è‡ªç„¶è¯­è¨€é—®ç­”ç³»ç»Ÿ

2. **ç¤¾äº¤å­¦ä¹ **:
   - å­¦ä¹ ç¤¾åŒºå’Œè®ºå›
   - å­¦ä¹ å°ç»„å’Œç«èµ›
   - åŒä¼´å­¦ä¹ åŒ¹é…

3. **ç§»åŠ¨ç«¯ä¼˜åŒ–**:
   - åŸç”Ÿç§»åŠ¨åº”ç”¨å¼€å‘
   - ç¦»çº¿å­¦ä¹ å¢å¼º
   - AR/VRå­¦ä¹ ä½“éªŒ

4. **å†…å®¹ç”Ÿæ€**:
   - ä¼˜è´¨å†…å®¹å¸‚åœº
   - æ•™å¸ˆå·¥å…·å¹³å°
   - ç¬¬ä¸‰æ–¹æ’ä»¶ç³»ç»Ÿ

## ğŸ’­ å¼€å‘æ„Ÿæ‚Ÿ

ç»è¿‡8å¤©çš„å…¨æ ˆå¼€å‘å†ç¨‹ï¼Œè¿™ä¸ªAIå­¦ä¹ ç®¡ç†ç³»ç»Ÿä»æ¦‚å¿µåˆ°å®ç°ï¼Œå±•ç°äº†ç°ä»£è½¯ä»¶å·¥ç¨‹çš„å®Œæ•´æµç¨‹ã€‚

### æŠ€æœ¯å±‚é¢æ”¶è·
1. **å…¨æ ˆæŠ€èƒ½æå‡**: ä»å‰ç«¯Reactåˆ°åç«¯Node.jsï¼Œä»æ•°æ®åº“è®¾è®¡åˆ°éƒ¨ç½²è¿ç»´
2. **AIæŠ€æœ¯åº”ç”¨**: æ·±å…¥ç†è§£å¦‚ä½•å°†AIæŠ€æœ¯èå…¥å®é™…ä¸šåŠ¡åœºæ™¯
3. **æ¶æ„è®¾è®¡èƒ½åŠ›**: å­¦ä¼šè®¾è®¡å¯æ‰©å±•ã€é«˜å¯ç”¨çš„ç³»ç»Ÿæ¶æ„
4. **DevOpså®è·µ**: æŒæ¡ç°ä»£åŒ–çš„CI/CDå’Œç›‘æ§è¿ç»´ä½“ç³»

### äº§å“æ€ç»´åŸ¹å…»
1. **ç”¨æˆ·ä½“éªŒä¼˜å…ˆ**: æŠ€æœ¯æœåŠ¡äºç”¨æˆ·éœ€æ±‚ï¼Œè€Œéä¸ºäº†ç‚«æŠ€
2. **è¿­ä»£å¼å¼€å‘**: åˆ†é˜¶æ®µé€’è¿›å¼å¼€å‘ï¼Œç¡®ä¿æ¯ä¸ªé˜¶æ®µéƒ½æœ‰å¯ç”¨çš„äº§å“
3. **æ•°æ®é©±åŠ¨**: é€šè¿‡ç›‘æ§æ•°æ®æŒ‡å¯¼äº§å“ä¼˜åŒ–æ–¹å‘
4. **å®‰å…¨æ„è¯†**: ä»è®¾è®¡ä¹‹åˆå°±è€ƒè™‘å®‰å…¨é˜²æŠ¤ï¼Œè€Œéäº‹åè¡¥æ•‘

### å›¢é˜Ÿåä½œä½“éªŒ
è™½ç„¶æ˜¯æ¨¡æ‹Ÿå¼€å‘ï¼Œä½†ä¸¥æ ¼æŒ‰ç…§çœŸå®é¡¹ç›®çš„æµç¨‹æ‰§è¡Œï¼š
1. **éœ€æ±‚åˆ†æ**: æ·±å…¥ç†è§£ä¸šåŠ¡éœ€æ±‚å’ŒæŠ€æœ¯è¦æ±‚
2. **æ¶æ„è®¾è®¡**: å‰æœŸè®¾è®¡å†³å®šåæœŸå¼€å‘çš„é¡ºåˆ©ç¨‹åº¦
3. **ä»£ç è§„èŒƒ**: ç»Ÿä¸€çš„ä»£ç é£æ ¼å’Œè§„èŒƒæ˜¯å›¢é˜Ÿåä½œçš„åŸºç¡€
4. **æ–‡æ¡£å®Œå–„**: å®Œæ•´çš„æ–‡æ¡£æ˜¯é¡¹ç›®å¯ç»´æŠ¤æ€§çš„ä¿è¯

è¿™ä¸ªé¡¹ç›®ä¸ä»…æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å­¦ä¹ ç®¡ç†ç³»ç»Ÿï¼Œæ›´æ˜¯ç°ä»£è½¯ä»¶å¼€å‘æœ€ä½³å®è·µçš„å®Œæ•´ä½“ç°ã€‚å®ƒå±•ç¤ºäº†å¦‚ä½•å°†AIæŠ€æœ¯ã€ç°ä»£å‰ç«¯æŠ€æœ¯ã€äº‘åŸç”Ÿæ¶æ„æœ‰æœºç»“åˆï¼Œåˆ›é€ çœŸæ­£æœ‰ä»·å€¼çš„äº§å“ã€‚

---

**DAY8 - ç¬¬å…«é˜¶æ®µå¼€å‘åœ†æ»¡å®Œæˆ! ğŸ‰**

**ğŸ† é¡¹ç›®æœ€ç»ˆçŠ¶æ€:**
- ç³»ç»Ÿå®Œæ•´æ€§: **100%** (8/8é˜¶æ®µå…¨éƒ¨å®Œæˆ)
- ä»£ç è´¨é‡è¯„çº§: **Sçº§** (ç”Ÿäº§å°±ç»ªã€é«˜æ€§èƒ½ã€é«˜å¯ç”¨ã€å®‰å…¨)
- åŠŸèƒ½å®ç°åº¦: **100%** (æ‰€æœ‰è§„åˆ’åŠŸèƒ½å‡å·²å®ç°å¹¶ä¼˜åŒ–)
- æŠ€æœ¯åˆ›æ–°åº¦: **ä¼˜ç§€** (AIé©±åŠ¨ã€å®æ—¶åä½œã€3Då¯è§†åŒ–ç­‰åˆ›æ–°ç‰¹æ€§)

**AIå­¦ä¹ ç®¡ç†ç³»ç»Ÿå¼€å‘é¡¹ç›®æ­£å¼å®Œæˆ!** 

è¿™æ˜¯ä¸€ä¸ªé›†æˆäº†äººå·¥æ™ºèƒ½ã€ç°ä»£WebæŠ€æœ¯ã€äº‘åŸç”Ÿæ¶æ„çš„å®Œæ•´äº§å“ï¼Œå…·å¤‡äº†æŠ•å…¥ç”Ÿäº§ä½¿ç”¨çš„æ‰€æœ‰æ¡ä»¶ã€‚ä»é¡¹ç›®è§„åˆ’åˆ°æœ€ç»ˆéƒ¨ç½²ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½ä½“ç°äº†ä¸“ä¸šçš„è½¯ä»¶å·¥ç¨‹å®è·µå’Œå¯¹ç”¨æˆ·ä½“éªŒçš„æè‡´è¿½æ±‚ã€‚

æ„Ÿè°¢è¿™8å¤©çš„å¼€å‘å†ç¨‹ï¼ŒæœŸå¾…è¿™ä¸ªAIå­¦ä¹ ç®¡ç†ç³»ç»Ÿèƒ½å¤Ÿä¸ºæ•™è‚²äº‹ä¸šè´¡çŒ®ä»·å€¼! ğŸš€âœ¨